# 開發計劃與記錄

本目錄包含所有開發階段的規劃與執行記錄。

---

## 目錄結構

```
development/
├── phase-1/              # 第一階段開發
│   ├── overview.md       # 階段總覽與任務規劃
│   ├── task-001.md       # [v] 任務 1（已完成標記範例）
│   ├── task-002.md       # 任務 2
│   └── ...
├── phase-2/              # 第二階段開發
└── README.md             # 本文件
```

---

## 開發流程

### 1. 階段規劃

每個 Phase 開始前：
1. 建立 `phase-X/` 資料夾
2. 建立 `overview.md`，規劃該階段的所有任務
3. 在 `overview.md` 中標記任務的執行順序與依賴關係
4. 標記哪些任務可以並行執行

### 2. 任務建立

每個任務：
1. 複製 `task-template.md` 並重新命名為 `task-XXX.md`
2. 填寫任務詳細資訊
3. **重要：** 必須引用相關的 spec 和設計文件
4. **重要：** 必須先定義測試要求，再開始開發

### 3. 任務執行

執行任務時：
1. 開啟對應的 `task-XXX.md` 文件
2. 將整個文件內容作為 prompt 提供給 Claude Code
3. Claude Code 會根據文件中的指示進行開發
4. 開發完成後執行測試
5. 測試通過後，在文件標題加上 `[v]` 標記

### 4. 並行開發

當需要同時開發多個任務：
1. 查看 `overview.md` 確認哪些任務可以並行
2. 為每個並行任務開啟獨立的 Claude Code 實例
3. 注意避免修改相同的檔案
4. 按照 `overview.md` 中的優先級依序合併

### 5. 測試驅動開發

**所有任務都必須遵循測試驅動開發原則：**

1. **開發前：** 在 task 文件中定義測試案例
2. **開發中：** 實作功能時同時撰寫測試
3. **開發後：** 執行測試確保通過
4. **完成標記：** 只有測試全部通過才能標記為完成

---

## 任務狀態標記

### 未完成
```
# Task-001: 用戶認證功能
```

### 已完成
```
# [v] Task-001: 用戶認證功能
```

**重要規則：**
- 只有在測試完全通過後，才能加上 `[v]` 標記
- 一旦標記為完成，該任務就不應再修改
- 如果需要修改已完成的任務，應該建立新的任務或問題記錄

---

## Spec 同步規則

**核心原則：有文件才有開發**

### 規則 1: 開發前必須有 Spec
- 不允許直接開發功能
- 所有功能必須先在 spec 中定義
- Task 必須引用對應的 spec

### 規則 2: Spec 必須與程式碼同步
- 當程式碼變更時，相關 spec 也必須更新
- 使用 Git commit 時，確認 spec 已同步
- Spec 應該準確反映當前程式碼狀態

### 規則 3: 變更流程
```
需求變更 → 更新 Spec → 建立/更新 Task → 開發 → 測試 → 完成
```

### 規則 4: 錯誤處理
當測試發現問題時：
1. 不能直接修改程式碼
2. 必須在 `issues/` 目錄建立問題記錄
3. 在問題記錄中分析原因、提出解決方案
4. 如需修改 spec，先更新 spec
5. 然後再修改程式碼

---

## Git 工作流程

詳見專案根目錄的 Git 工作流程文件。

**重點：**
- 每個 task 使用獨立的 feature branch
- Branch 命名：`feature/task-XXX-description`
- 測試通過後才能合併
- Commit 訊息包含 task 編號

---

## 階段完成檢查清單

每個 Phase 完成前，確認：

- [ ] 所有 task 都標記為完成 `[v]`
- [ ] 所有測試都通過
- [ ] Spec 與程式碼同步
- [ ] 程式碼已合併到 `develop` branch
- [ ] 執行整合測試
- [ ] 文件已更新
- [ ] 準備好進入下一個 Phase 或進行整合測試

---

## 常見問題

### Q: 開發過程中發現需求不清楚怎麼辦？
A: 停止開發，回到產品設計階段釐清需求，更新相關文件後再繼續。

### Q: 測試失敗怎麼辦？
A: 不要直接修改程式碼。建立 issue 記錄，分析問題，提出解決方案，必要時更新 spec。

### Q: 可以跳過測試直接標記完成嗎？
A: 絕對不行。測試是確保品質的關鍵，必須通過所有測試才能標記完成。

### Q: 如何決定任務的優先級？
A: 在 `overview.md` 中基於依賴關係和業務價值決定。通常先做基礎設施，再做功能。

---

## 範本檔案

- **任務範本：** 參考 `phase-1/overview.md` 中的任務結構
- **問題記錄範本：** 參考 `issues/issue-template.md`

---

## 注意事項

1. **不要急於開發**：先確保規劃清楚、測試定義好
2. **保持文件同步**：Spec 和程式碼必須一致
3. **測試驅動**：測試不是開發後才做的事，是開發前就要規劃的
4. **溝通清楚**：並行開發時要確保不會衝突
5. **記錄完整**：所有問題和決策都要記錄下來

---

最後更新：[日期]
