# Task-022: æ–°å¢å°ˆæ¡ˆæµç¨‹ï¼ˆæ­¥é©Ÿ 1-2ï¼šå…§å®¹èˆ‡è¦–è¦ºé…ç½®ï¼‰

> **å»ºç«‹æ—¥æœŸ:** 2025-10-19
> **ç‹€æ…‹:** â³ æœªé–‹å§‹
> **é è¨ˆæ™‚é–“:** 20 å°æ™‚
> **å„ªå…ˆç´š:** P0 (å¿…é ˆ)

---

## é—œè¯æ–‡ä»¶

### ç”¢å“è¨­è¨ˆ
- **é é¢è¨­è¨ˆ:**
  - `product-design/pages.md#Page-3` - æ–°å¢å°ˆæ¡ˆé é¢
  - `product-design/pages.md#Page-4` - è¦–è¦ºåŒ–é…ç½®é é¢
- **ä½¿ç”¨è€…æµç¨‹:**
  - `product-design/flows.md#Flow-1` - åŸºæœ¬å½±ç‰‡ç”Ÿæˆæµç¨‹ï¼ˆæ­¥é©Ÿ 1-2ï¼‰
  - `product-design/flows.md#Flow-3` - è¦–è¦ºåŒ–ç•Œé¢é…ç½®

### æŠ€è¡“è¦æ ¼
- **å‰ç«¯é é¢è¦æ ¼:**
  - `tech-specs/frontend/pages.md#3-æ–°å¢å°ˆæ¡ˆé -new-project` - æ–°å¢å°ˆæ¡ˆé 
  - `tech-specs/frontend/pages.md#4-è¦–è¦ºåŒ–é…ç½®é -visual-config` - è¦–è¦ºåŒ–é…ç½®é 
- **å…ƒä»¶æ¶æ§‹:**
  - `tech-specs/frontend/component-architecture.md#å…±ç”¨å…ƒä»¶å®šç¾©` - UI å…ƒä»¶è¦æ ¼
  - `tech-specs/frontend/component-architecture.md#å…ƒä»¶å±¤ç´šçµæ§‹` - å…ƒä»¶å±¤ç´šè¨­è¨ˆ

### ç›¸é—œä»»å‹™
- **å‰ç½®ä»»å‹™:**
  - Task-017 âœ… (å‰ç«¯å°ˆæ¡ˆåˆå§‹åŒ–èˆ‡è·¯ç”±ç³»çµ±)
  - Task-018 âœ… (Zustand Stores èˆ‡ç‹€æ…‹ç®¡ç†)
  - Task-019 âœ… (Axios å®¢æˆ¶ç«¯èˆ‡ API æ•´åˆå±¤)
- **å¾ŒçºŒä»»å‹™:**
  - Task-023 (æ–°å¢å°ˆæ¡ˆæµç¨‹ï¼šæ­¥é©Ÿ 3-4)
  - Task-029 (æ•´åˆæ¸¬è©¦)

---

## ä»»å‹™ç›®æ¨™

### ç°¡è¿°

å¯¦ä½œæ–°å¢å°ˆæ¡ˆæµç¨‹çš„å‰å…©å€‹æ­¥é©Ÿï¼š
1. **Page-3: æ–°å¢å°ˆæ¡ˆé ** - æ–‡å­—å…§å®¹ä¸Šå‚³/è²¼ä¸Šã€å°ˆæ¡ˆåç¨±è¼¸å…¥ã€å…§å®¹é©—è­‰
2. **Page-4: è¦–è¦ºåŒ–é…ç½®é ** - å­—å¹•ã€Logoã€ç–ŠåŠ å…ƒç´ çš„æ‹–æ‹½å®šä½èˆ‡å³æ™‚é è¦½

é€™å…©å€‹é é¢æ˜¯æ•´å€‹å½±ç‰‡ç”Ÿæˆæµç¨‹çš„å…¥å£,è² è²¬æ”¶é›†ç”¨æˆ¶è¼¸å…¥ä¸¦é€²è¡Œè¦–è¦ºåŒ–é…ç½®ã€‚

### æˆåŠŸæ¨™æº–

- [ ] **Page-3 å¯¦ä½œå®Œæˆ**
  - [x] å°ˆæ¡ˆåç¨±è¼¸å…¥èˆ‡é©—è­‰
  - [x] æ–‡å­—å…§å®¹ä¸Šå‚³/è²¼ä¸Šåˆ‡æ›
  - [x] å­—æ•¸çµ±è¨ˆèˆ‡å³æ™‚é©—è­‰ï¼ˆ500-10000 å­—ï¼‰
  - [x] æª”æ¡ˆä¸Šå‚³æ”¯æ´ï¼ˆ.txt, .mdï¼‰
  - [x] è¡¨å–®é©—è­‰èˆ‡éŒ¯èª¤æç¤º
  - [x] æˆåŠŸå¾Œè·³è½‰åˆ°è¦–è¦ºåŒ–é…ç½®é 

- [ ] **Page-4 å¯¦ä½œå®Œæˆ**
  - [x] å·¦å³åˆ†æ¬„ä½ˆå±€ï¼ˆé è¦½å€ 60% + é…ç½®é¢æ¿ 40%ï¼‰
  - [x] Konva.js é è¦½ç•«å¸ƒ
  - [x] å­—å¹•é…ç½®é¢æ¿ï¼ˆå­—å‹ã€å¤§å°ã€é¡è‰²ã€ä½ç½®ã€é‚Šæ¡†ã€é™°å½±ã€èƒŒæ™¯ï¼‰
  - [x] Logo ä¸Šå‚³èˆ‡å®šä½
  - [x] æ‹–æ‹½å®šä½åŠŸèƒ½ï¼ˆreact-dnd æˆ–åŸç”Ÿï¼‰
  - [x] å³æ™‚é è¦½ï¼ˆé…ç½®è®Šæ›´ < 100ms æ›´æ–°ï¼‰
  - [x] è‡ªå‹•å„²å­˜ï¼ˆdebounce 1 ç§’ï¼‰
  - [x] æ¨¡æ¿è¼‰å…¥/å„²å­˜åŠŸèƒ½
  - [x] æˆåŠŸå¾Œè·³è½‰åˆ° Prompt è¨­å®šé 

- [ ] **éŸ¿æ‡‰å¼è¨­è¨ˆ**
  - [x] æ¡Œé¢ï¼ˆâ‰¥1024pxï¼‰æ­£å¸¸é¡¯ç¤º
  - [x] å¹³æ¿ï¼ˆ768-1023pxï¼‰é©é…
  - [x] æ‰‹æ©Ÿï¼ˆ<768pxï¼‰èª¿æ•´ä½ˆå±€

- [ ] **å–®å…ƒæ¸¬è©¦**
  - [x] è¡¨å–®é©—è­‰é‚è¼¯æ¸¬è©¦
  - [x] æª”æ¡ˆä¸Šå‚³æ¸¬è©¦
  - [x] è¦–è¦ºé…ç½®æ¸¬è©¦
  - [x] æ¸¬è©¦è¦†è“‹ç‡ > 80%

---

## æ¸¬è©¦è¦æ±‚

### å–®å…ƒæ¸¬è©¦

#### æ¸¬è©¦ 1ï¼šå°ˆæ¡ˆåç¨±é©—è­‰

**ç›®çš„ï¼š** é©—è­‰å°ˆæ¡ˆåç¨±çš„é•·åº¦å’Œæ ¼å¼è¦æ±‚

**æ¸¬è©¦æ¡ˆä¾‹ï¼š**

**1.1 æˆåŠŸï¼šæœ‰æ•ˆçš„å°ˆæ¡ˆåç¨±**
```typescript
// Input
const input = {
  project_name: "æˆ‘çš„ç¬¬ä¸€å€‹å½±ç‰‡å°ˆæ¡ˆ"
}

// Expected Output
const result = projectFormSchema.safeParse(input)
expect(result.success).toBe(true)
```

**1.2 å¤±æ•—ï¼šå°ˆæ¡ˆåç¨±ç‚ºç©º**
```typescript
// Input
const input = {
  project_name: ""
}

// Expected Output
const result = projectFormSchema.safeParse(input)
expect(result.success).toBe(false)
expect(result.error.issues[0].message).toBe("å°ˆæ¡ˆåç¨±ä¸èƒ½ç‚ºç©º")
```

**1.3 å¤±æ•—ï¼šå°ˆæ¡ˆåç¨±è¶…é 100 å­—å…ƒ**
```typescript
// Input
const input = {
  project_name: "a".repeat(101)
}

// Expected Output
const result = projectFormSchema.safeParse(input)
expect(result.success).toBe(false)
expect(result.error.issues[0].message).toBe("å°ˆæ¡ˆåç¨±ä¸èƒ½è¶…é 100 å­—å…ƒ")
```

**é©—è­‰é»ï¼š**
- [ ] ç©ºå­—ä¸²è¢«æ‹’çµ•
- [ ] è¶…é 100 å­—å…ƒè¢«æ‹’çµ•
- [ ] 1-100 å­—å…ƒè¢«æ¥å—
- [ ] éŒ¯èª¤è¨Šæ¯æ­£ç¢ºé¡¯ç¤º

---

#### æ¸¬è©¦ 2ï¼šæ–‡å­—å…§å®¹é•·åº¦é©—è­‰

**ç›®çš„ï¼š** é©—è­‰æ–‡å­—å…§å®¹å¿…é ˆåœ¨ 500-10000 å­—ä¹‹é–“

**æ¸¬è©¦æ¡ˆä¾‹ï¼š**

**2.1 å¤±æ•—ï¼šæ–‡å­—å°‘æ–¼ 500 å­—**
```typescript
// Input
const input = {
  content_text: "é€™æ˜¯ä¸€æ®µå¾ˆçŸ­çš„æ–‡å­—ã€‚".repeat(20) // ç´„ 240 å­—
}

// Expected Output
const result = projectFormSchema.safeParse(input)
expect(result.success).toBe(false)
expect(result.error.issues[0].message).toBe("æ–‡å­—é•·åº¦å¿…é ˆåœ¨ 500-10000 å­—ä¹‹é–“")
```

**2.2 æˆåŠŸï¼šæ–‡å­—æ­£å¥½ 500 å­—**
```typescript
// Input
const input = {
  content_text: "æ¸¬è©¦æ–‡å­—".repeat(125) // æ­£å¥½ 500 å­—
}

// Expected Output
const result = projectFormSchema.safeParse(input)
expect(result.success).toBe(true)
```

**2.3 æˆåŠŸï¼šæ–‡å­— 5000 å­—ï¼ˆä¸­é–“å€¼ï¼‰**
```typescript
// Input
const input = {
  content_text: "æ¸¬è©¦æ–‡å­—".repeat(1250) // 5000 å­—
}

// Expected Output
expect(result.success).toBe(true)
```

**2.4 æˆåŠŸï¼šæ–‡å­—æ­£å¥½ 10000 å­—**
```typescript
// Input
const input = {
  content_text: "æ¸¬è©¦æ–‡å­—".repeat(2500) // 10000 å­—
}

// Expected Output
expect(result.success).toBe(true)
```

**2.5 å¤±æ•—ï¼šæ–‡å­—è¶…é 10000 å­—**
```typescript
// Input
const input = {
  content_text: "æ¸¬è©¦æ–‡å­—".repeat(2501) // 10004 å­—
}

// Expected Output
expect(result.success).toBe(false)
expect(result.error.issues[0].message).toBe("æ–‡å­—é•·åº¦å¿…é ˆåœ¨ 500-10000 å­—ä¹‹é–“")
```

**é©—è­‰é»ï¼š**
- [ ] < 500 å­—è¢«æ‹’çµ•
- [ ] 500 å­—è¢«æ¥å—
- [ ] 5000 å­—ï¼ˆä¸­é–“å€¼ï¼‰è¢«æ¥å—
- [ ] 10000 å­—è¢«æ¥å—
- [ ] > 10000 å­—è¢«æ‹’çµ•
- [ ] å­—æ•¸çµ±è¨ˆå³æ™‚æ›´æ–°
- [ ] éŒ¯èª¤è¨Šæ¯å³æ™‚é¡¯ç¤ºï¼ˆé»ƒè‰²è­¦å‘Šï¼‰

---

#### æ¸¬è©¦ 3ï¼šæª”æ¡ˆä¸Šå‚³é©—è­‰

**ç›®çš„ï¼š** é©—è­‰ä¸Šå‚³æª”æ¡ˆçš„æ ¼å¼å’Œå¤§å°é™åˆ¶

**æ¸¬è©¦æ¡ˆä¾‹ï¼š**

**3.1 æˆåŠŸï¼šä¸Šå‚³æœ‰æ•ˆçš„ .txt æª”æ¡ˆ**
```typescript
// Input
const file = new File(
  ["é€™æ˜¯æ¸¬è©¦å…§å®¹ã€‚".repeat(200)], // 1000 å­—
  "content.txt",
  { type: "text/plain" }
)

// Expected Output
const result = await handleFileUpload(file)
expect(result.success).toBe(true)
expect(formData.content_text.length).toBeGreaterThanOrEqual(500)
```

**3.2 æˆåŠŸï¼šä¸Šå‚³æœ‰æ•ˆçš„ .md æª”æ¡ˆ**
```typescript
// Input
const file = new File(
  ["# æ¨™é¡Œ\n\nå…§å®¹...".repeat(200)],
  "content.md",
  { type: "text/markdown" }
)

// Expected Output
expect(result.success).toBe(true)
```

**3.3 å¤±æ•—ï¼šæª”æ¡ˆå¤§å°è¶…é 10MB**
```typescript
// Input
const largeContent = "a".repeat(11 * 1024 * 1024) // 11MB
const file = new File([largeContent], "large.txt", { type: "text/plain" })

// Expected Output
const result = await handleFileUpload(file)
expect(result.success).toBe(false)
expect(result.error).toBe("æª”æ¡ˆå¤§å°ä¸èƒ½è¶…é 10MB")
```

**3.4 å¤±æ•—ï¼šä¸æ”¯æ´çš„æª”æ¡ˆæ ¼å¼**
```typescript
// Input
const file = new File(
  ["å…§å®¹"],
  "document.pdf",
  { type: "application/pdf" }
)

// Expected Output
const result = await handleFileUpload(file)
expect(result.success).toBe(false)
expect(result.error).toBe("æª”æ¡ˆå¿…é ˆç‚º TXT æˆ– MD æ ¼å¼")
```

**3.5 å¤±æ•—ï¼šæª”æ¡ˆå…§å®¹é•·åº¦ä¸ç¬¦**
```typescript
// Input
const file = new File(
  ["å¾ˆçŸ­çš„å…§å®¹"], // < 500 å­—
  "short.txt",
  { type: "text/plain" }
)

// Expected Output
const result = await handleFileUpload(file)
expect(result.success).toBe(false)
expect(result.error).toBe("æ–‡å­—é•·åº¦å¿…é ˆåœ¨ 500-10000 å­—ä¹‹é–“")
```

**é©—è­‰é»ï¼š**
- [ ] .txt æª”æ¡ˆè¢«æ¥å—
- [ ] .md æª”æ¡ˆè¢«æ¥å—
- [ ] > 10MB è¢«æ‹’çµ•
- [ ] ä¸æ”¯æ´æ ¼å¼è¢«æ‹’çµ•
- [ ] æª”æ¡ˆå…§å®¹è‡ªå‹•å¡«å…¥ textarea
- [ ] å­—æ•¸çµ±è¨ˆè‡ªå‹•æ›´æ–°
- [ ] æˆåŠŸæç¤ºé¡¯ç¤º

---

#### æ¸¬è©¦ 4ï¼šè¦–è¦ºé…ç½®å³æ™‚é è¦½

**ç›®çš„ï¼š** é©—è­‰è¦–è¦ºé…ç½®è®Šæ›´èƒ½å³æ™‚åæ˜ åœ¨é è¦½å€

**æ¸¬è©¦æ¡ˆä¾‹ï¼š**

**4.1 å­—å¹•é¡è‰²è®Šæ›´**
```typescript
// Input
const config = {
  subtitle: {
    font_color: "#FFFFFF"
  }
}

// User Action
updateConfig({ subtitle: { font_color: "#FF0000" } })

// Expected Output (< 100ms)
const previewElement = getSubtitleElement()
expect(previewElement.style.color).toBe("#FF0000")
```

**4.2 å­—å¹•å¤§å°è®Šæ›´**
```typescript
// Input
updateConfig({ subtitle: { font_size: 48 } })

// Expected Output (< 100ms)
expect(getSubtitleElement().style.fontSize).toBe("48px")
```

**4.3 Logo ä½ç½®æ‹–æ‹½**
```typescript
// Input
const initialPosition = { x: 50, y: 50 }
const newPosition = { x: 150, y: 200 }

// User Action
dragLogo(initialPosition, newPosition)

// Expected Output (< 100ms)
const logoElement = getLogoElement()
expect(logoElement.style.left).toBe("150px")
expect(logoElement.style.top).toBe("200px")
```

**é©—è­‰é»ï¼š**
- [ ] é¡è‰²è®Šæ›´ < 100ms åæ˜ 
- [ ] å­—é«”å¤§å°è®Šæ›´ < 100ms åæ˜ 
- [ ] Logo ä½ç½®æ‹–æ‹½ < 100ms åæ˜ 
- [ ] é…ç½®é¢æ¿èˆ‡é è¦½åŒæ­¥
- [ ] Debounce æ©Ÿåˆ¶æ­£å¸¸ï¼ˆ1 ç§’å¾Œè‡ªå‹•å„²å­˜ï¼‰

---

#### æ¸¬è©¦ 5ï¼šè‡ªå‹•å„²å­˜æ©Ÿåˆ¶

**ç›®çš„ï¼š** é©—è­‰é…ç½®è®Šæ›´å¾Œ 1 ç§’è‡ªå‹•å„²å­˜

**æ¸¬è©¦æ¡ˆä¾‹ï¼š**

**5.1 å–®æ¬¡è®Šæ›´è‡ªå‹•å„²å­˜**
```typescript
// Input
updateConfig({ subtitle: { font_size: 50 } })

// Expected Output (after 1000ms)
await waitFor(1000)
expect(api.saveVisualConfig).toHaveBeenCalledWith(
  projectId,
  expect.objectContaining({
    subtitle: { font_size: 50 }
  })
)
```

**5.2 å¤šæ¬¡å¿«é€Ÿè®Šæ›´åªå„²å­˜æœ€å¾Œä¸€æ¬¡**
```typescript
// Input (rapid changes)
updateConfig({ subtitle: { font_size: 40 } })
await waitFor(200)
updateConfig({ subtitle: { font_size: 50 } })
await waitFor(200)
updateConfig({ subtitle: { font_size: 60 } })

// Expected Output (after 1000ms from last change)
await waitFor(1500)
expect(api.saveVisualConfig).toHaveBeenCalledTimes(1)
expect(api.saveVisualConfig).toHaveBeenCalledWith(
  projectId,
  expect.objectContaining({
    subtitle: { font_size: 60 }
  })
)
```

**é©—è­‰é»ï¼š**
- [ ] è®Šæ›´å¾Œ 1 ç§’è§¸ç™¼å„²å­˜
- [ ] å¤šæ¬¡å¿«é€Ÿè®Šæ›´ debounce æ­£å¸¸
- [ ] å„²å­˜æˆåŠŸé¡¯ç¤ºç¶ è‰² toast
- [ ] å„²å­˜å¤±æ•—é¡¯ç¤ºç´…è‰²éŒ¯èª¤è¨Šæ¯

---

#### æ¸¬è©¦ 6ï¼šæ¨¡æ¿è¼‰å…¥èˆ‡å„²å­˜

**ç›®çš„ï¼š** é©—è­‰è¦–è¦ºé…ç½®æ¨¡æ¿çš„è¼‰å…¥å’Œå„²å­˜åŠŸèƒ½

**æ¸¬è©¦æ¡ˆä¾‹ï¼š**

**6.1 è¼‰å…¥ç¾æœ‰æ¨¡æ¿**
```typescript
// Input
const templateId = "tech-review-template"

// User Action
loadTemplate(templateId)

// Expected Output
expect(api.getTemplate).toHaveBeenCalledWith(templateId)
const config = getCurrentConfig()
expect(config.subtitle.font_family).toBe("Noto Sans TC")
expect(config.subtitle.font_size).toBe(48)
expect(toast.success).toHaveBeenCalledWith("æ¨¡æ¿å·²è¼‰å…¥")
```

**6.2 å„²å­˜ç‚ºæ–°æ¨¡æ¿**
```typescript
// Input
const templateName = "æˆ‘çš„è‡ªè¨‚æ¨¡æ¿"
const currentConfig = getCurrentConfig()

// User Action
saveAsTemplate(templateName)

// Expected Output
expect(api.createTemplate).toHaveBeenCalledWith({
  name: templateName,
  config: currentConfig
})
expect(toast.success).toHaveBeenCalledWith("æ¨¡æ¿å·²å„²å­˜")
```

**6.3 æ¨¡æ¿ä¸å­˜åœ¨æ™‚é¡¯ç¤ºéŒ¯èª¤**
```typescript
// Input
const invalidTemplateId = "non-existent"

// User Action & Expected Output
loadTemplate(invalidTemplateId)
await waitFor(() => {
  expect(toast.error).toHaveBeenCalledWith("æ‰¾ä¸åˆ°æ¨¡æ¿")
})
```

**é©—è­‰é»ï¼š**
- [ ] æ¨¡æ¿è¼‰å…¥æˆåŠŸ
- [ ] é…ç½®è‡ªå‹•å¥—ç”¨
- [ ] æ¨¡æ¿å„²å­˜æˆåŠŸ
- [ ] éŒ¯èª¤è™•ç†æ­£ç¢º
- [ ] æˆåŠŸ/å¤±æ•—æç¤ºé¡¯ç¤º

---

### æ•´åˆæ¸¬è©¦

#### æ¸¬è©¦ 7ï¼šå®Œæ•´æ–°å¢å°ˆæ¡ˆæµç¨‹ï¼ˆæ­¥é©Ÿ 1-2ï¼‰

**ç›®çš„ï¼š** é©—è­‰å¾æ–°å¢å°ˆæ¡ˆåˆ°è¦–è¦ºé…ç½®çš„å®Œæ•´æµç¨‹

**æµç¨‹ï¼š**

```typescript
test("å®Œæ•´æ–°å¢å°ˆæ¡ˆæµç¨‹", async () => {
  // Step 1: é€²å…¥æ–°å¢å°ˆæ¡ˆé 
  const { getByText, getByPlaceholderText, getByRole } = render(<NewProjectPage />)

  // Step 2: è¼¸å…¥å°ˆæ¡ˆåç¨±
  const nameInput = getByPlaceholderText("è¼¸å…¥å°ˆæ¡ˆåç¨±")
  await userEvent.type(nameInput, "æ¸¬è©¦å°ˆæ¡ˆ")

  // Step 3: é¸æ“‡è²¼ä¸Šæ–‡å­—
  const pasteRadio = getByLabelText("è²¼ä¸Šæ–‡å­—")
  await userEvent.click(pasteRadio)

  // Step 4: è²¼ä¸Šæ–‡å­—å…§å®¹ï¼ˆ1000 å­—ï¼‰
  const contentTextarea = getByPlaceholderText("è²¼ä¸Šæ–‡å­—å…§å®¹")
  const testContent = "é€™æ˜¯æ¸¬è©¦å…§å®¹ã€‚".repeat(200) // 1000 å­—
  await userEvent.type(contentTextarea, testContent)

  // Step 5: é©—è­‰å­—æ•¸çµ±è¨ˆ
  expect(getByText("ç›®å‰å­—æ•¸: 1000")).toBeInTheDocument()

  // Step 6: é»æ“Šä¸‹ä¸€æ­¥
  const nextButton = getByText("ä¸‹ä¸€æ­¥")
  await userEvent.click(nextButton)

  // Step 7: é©—è­‰ API å‘¼å«
  expect(api.createProject).toHaveBeenCalledWith({
    project_name: "æ¸¬è©¦å°ˆæ¡ˆ",
    content_text: testContent,
    content_source: "paste"
  })

  // Step 8: ç­‰å¾…å°ˆæ¡ˆå‰µå»ºæˆåŠŸ
  await waitFor(() => {
    expect(toast.success).toHaveBeenCalledWith("å°ˆæ¡ˆå‰µå»ºæˆåŠŸï¼")
  })

  // Step 9: é©—è­‰è·³è½‰åˆ°è¦–è¦ºé…ç½®é 
  expect(mockRouter.push).toHaveBeenCalledWith(
    "/project/mock-project-id/configure/visual"
  )

  // Step 10: è¦–è¦ºé…ç½®é è¼‰å…¥
  const { getByText: getConfigText } = render(<VisualConfigPage params={{ id: "mock-project-id" }} />)

  // Step 11: ç­‰å¾…é è¨­é…ç½®è¼‰å…¥
  await waitFor(() => {
    expect(getConfigText("å­—å¹•è¨­å®š")).toBeInTheDocument()
  })

  // Step 12: ä¿®æ”¹å­—å¹•é¡è‰²
  const colorPicker = getByRole("button", { name: "é¸æ“‡é¡è‰²" })
  await userEvent.click(colorPicker)
  // ... é¡è‰²é¸æ“‡å™¨äº’å‹•

  // Step 13: é©—è­‰å³æ™‚é è¦½
  const subtitlePreview = getSubtitleElement()
  expect(subtitlePreview.style.color).toBe("#FF0000")

  // Step 14: ç­‰å¾…è‡ªå‹•å„²å­˜
  await waitFor(1500)
  expect(api.saveVisualConfig).toHaveBeenCalled()

  // Step 15: é»æ“Šä¸‹ä¸€æ­¥
  const nextBtn = getConfigText("ä¸‹ä¸€æ­¥")
  await userEvent.click(nextBtn)

  // Step 16: é©—è­‰è·³è½‰åˆ° Prompt è¨­å®šé 
  expect(mockRouter.push).toHaveBeenCalledWith(
    "/project/mock-project-id/configure/prompt-model"
  )
})
```

**é©—è­‰é»ï¼š**
- [ ] å°ˆæ¡ˆå‰µå»º API å‘¼å«æˆåŠŸ
- [ ] è·³è½‰åˆ°è¦–è¦ºé…ç½®é 
- [ ] é è¨­é…ç½®è¼‰å…¥
- [ ] é…ç½®è®Šæ›´å³æ™‚é è¦½
- [ ] è‡ªå‹•å„²å­˜æ©Ÿåˆ¶æ­£å¸¸
- [ ] è·³è½‰åˆ° Prompt è¨­å®šé 
- [ ] æ•´å€‹æµç¨‹ç„¡éŒ¯èª¤

---

## å¯¦ä½œè¦æ ¼

### éœ€è¦å»ºç«‹/ä¿®æ”¹çš„æª”æ¡ˆ

#### 1. æ–°å¢å°ˆæ¡ˆé é¢

**æª”æ¡ˆï¼š** `frontend/app/project/new/page.tsx`

**è·è²¬ï¼š** æ–°å¢å°ˆæ¡ˆé é¢ä¸»å…ƒä»¶

**å¯¦ä½œï¼š**

```tsx
'use client'

import { useState } from 'react'
import { useRouter } from 'next/navigation'
import { useMutation } from '@tanstack/react-query'
import { z } from 'zod'
import AppLayout from '@/components/layout/AppLayout'
import Breadcrumb from '@/components/ui/Breadcrumb'
import Button from '@/components/ui/Button'
import Input from '@/components/ui/Input'
import Select from '@/components/ui/Select'
import FileUpload from '@/components/ui/FileUpload'
import { projectsApi } from '@/services/api/projects'
import { toast } from '@/services/toast'

// Form Schema
const projectFormSchema = z.object({
  project_name: z
    .string()
    .min(1, 'å°ˆæ¡ˆåç¨±ä¸èƒ½ç‚ºç©º')
    .max(100, 'å°ˆæ¡ˆåç¨±ä¸èƒ½è¶…é 100 å­—å…ƒ'),

  content_source: z.enum(['upload', 'paste']),

  content_text: z
    .string()
    .min(500, 'æ–‡å­—é•·åº¦å¿…é ˆåœ¨ 500-10000 å­—ä¹‹é–“')
    .max(10000, 'æ–‡å­—é•·åº¦å¿…é ˆåœ¨ 500-10000 å­—ä¹‹é–“')
})

export default function NewProjectPage() {
  const router = useRouter()

  const [formData, setFormData] = useState({
    project_name: '',
    content_source: 'paste' as 'upload' | 'paste',
    content_text: '',
  })

  const [errors, setErrors] = useState<Record<string, string>>({})

  // å­—æ•¸çµ±è¨ˆ
  const charCount = formData.content_text.length

  // Create Project Mutation
  const createMutation = useMutation({
    mutationFn: projectsApi.create,
    onSuccess: (project) => {
      toast.success('å°ˆæ¡ˆå‰µå»ºæˆåŠŸï¼')
      router.push(`/project/${project.id}/configure/visual`)
    },
    onError: (error: any) => {
      toast.error(error.message || 'å°ˆæ¡ˆå‰µå»ºå¤±æ•—')
    }
  })

  // è™•ç†æª”æ¡ˆä¸Šå‚³
  const handleFileUpload = async (files: File[]) => {
    const file = files[0]

    // é©—è­‰æª”æ¡ˆå¤§å°
    if (file.size > 10 * 1024 * 1024) {
      toast.error('æª”æ¡ˆå¤§å°ä¸èƒ½è¶…é 10MB')
      return
    }

    // é©—è­‰æª”æ¡ˆæ ¼å¼
    const allowedTypes = ['text/plain', 'text/markdown']
    if (!allowedTypes.includes(file.type)) {
      toast.error('æª”æ¡ˆå¿…é ˆç‚º TXT æˆ– MD æ ¼å¼')
      return
    }

    // è®€å–æ–‡å­—
    try {
      const text = await file.text()
      const charCount = text.length

      if (charCount < 500 || charCount > 10000) {
        toast.error('æ–‡å­—é•·åº¦å¿…é ˆåœ¨ 500-10000 å­—ä¹‹é–“')
        return
      }

      setFormData({ ...formData, content_text: text })
      toast.success('æª”æ¡ˆè¼‰å…¥æˆåŠŸ')
    } catch (error) {
      toast.error('æª”æ¡ˆè®€å–å¤±æ•—')
    }
  }

  // è¡¨å–®æäº¤
  const handleSubmit = () => {
    // é©—è­‰è¡¨å–®
    const result = projectFormSchema.safeParse(formData)

    if (!result.success) {
      const fieldErrors: Record<string, string> = {}
      result.error.issues.forEach(issue => {
        const field = issue.path[0] as string
        fieldErrors[field] = issue.message
      })
      setErrors(fieldErrors)
      return
    }

    // æ¸…é™¤éŒ¯èª¤
    setErrors({})

    // æäº¤
    createMutation.mutate({
      project_name: formData.project_name,
      content_text: formData.content_text,
      content_source: formData.content_source,
    })
  }

  return (
    <AppLayout>
      <Breadcrumb
        items={[
          { label: 'ä¸»æ§å°', href: '/' },
          { label: 'æ–°å¢å°ˆæ¡ˆ' }
        ]}
      />

      <div className="max-w-2xl mx-auto p-6">
        <h1 className="text-3xl font-bold mb-6">æ–°å¢å°ˆæ¡ˆ</h1>

        {/* å°ˆæ¡ˆåç¨± */}
        <div className="mb-6">
          <label className="block mb-2 font-medium">å°ˆæ¡ˆåç¨±</label>
          <Input
            value={formData.project_name}
            onChange={(e) => setFormData({ ...formData, project_name: e.target.value })}
            placeholder="è¼¸å…¥å°ˆæ¡ˆåç¨±"
            status={errors.project_name ? 'error' : ''}
          />
          {errors.project_name && (
            <p className="text-red-500 text-sm mt-1">{errors.project_name}</p>
          )}
        </div>

        {/* æ–‡å­—ä¾†æº */}
        <div className="mb-6">
          <label className="block mb-2 font-medium">æ–‡å­—ä¾†æº</label>
          <Select
            value={formData.content_source}
            onChange={(value) => setFormData({ ...formData, content_source: value as 'upload' | 'paste' })}
            options={[
              { label: 'è²¼ä¸Šæ–‡å­—', value: 'paste' },
              { label: 'ä¸Šå‚³æª”æ¡ˆ', value: 'upload' },
            ]}
          />
        </div>

        {/* æ–‡å­—å…§å®¹ */}
        {formData.content_source === 'paste' ? (
          <div className="mb-6">
            <label className="block mb-2 font-medium">æ–‡å­—å…§å®¹</label>
            <textarea
              className={`w-full h-64 border rounded p-3 font-mono text-sm ${
                errors.content_text ? 'border-red-500' : 'border-gray-300'
              }`}
              value={formData.content_text}
              onChange={(e) => setFormData({ ...formData, content_text: e.target.value })}
              placeholder="è²¼ä¸Šæ–‡å­—å…§å®¹ (500-10000 å­—)"
            />
            <div className="flex justify-between items-center mt-2">
              <p className={`text-sm ${
                charCount < 500 || charCount > 10000 ? 'text-yellow-600' : 'text-gray-500'
              }`}>
                ç›®å‰å­—æ•¸: {charCount}
              </p>
              {charCount > 0 && (charCount < 500 || charCount > 10000) && (
                <p className="text-sm text-yellow-600">
                  {charCount < 500 ? `é‚„éœ€è¦ ${500 - charCount} å­—` : `è¶…é ${charCount - 10000} å­—`}
                </p>
              )}
            </div>
            {errors.content_text && (
              <p className="text-red-500 text-sm mt-1">{errors.content_text}</p>
            )}
          </div>
        ) : (
          <div className="mb-6">
            <label className="block mb-2 font-medium">ä¸Šå‚³æª”æ¡ˆ</label>
            <FileUpload
              accept=".txt,.md"
              onFileSelect={handleFileUpload}
            />
            <p className="text-sm text-gray-500 mt-2">
              æ”¯æ´ .txt å’Œ .md æ ¼å¼ï¼Œæœ€å¤§ 10MB
            </p>
          </div>
        )}

        {/* æ“ä½œæŒ‰éˆ• */}
        <div className="flex justify-end gap-4 mt-8">
          <Button onClick={() => router.push('/')}>
            å–æ¶ˆ
          </Button>
          <Button
            type="primary"
            loading={createMutation.isLoading}
            onClick={handleSubmit}
            disabled={charCount < 500 || charCount > 10000}
          >
            ä¸‹ä¸€æ­¥
          </Button>
        </div>
      </div>
    </AppLayout>
  )
}
```

---

#### 2. è¦–è¦ºåŒ–é…ç½®é é¢

**æª”æ¡ˆï¼š** `frontend/app/project/[id]/configure/visual/page.tsx`

**è·è²¬ï¼š** è¦–è¦ºåŒ–é…ç½®é é¢ä¸»å…ƒä»¶

**å¯¦ä½œï¼š**

```tsx
'use client'

import { useState, useEffect } from 'react'
import { useRouter } from 'next/navigation'
import { useQuery, useMutation } from '@tanstack/react-query'
import AppLayout from '@/components/layout/AppLayout'
import Breadcrumb from '@/components/ui/Breadcrumb'
import Button from '@/components/ui/Button'
import Card from '@/components/ui/Card'
import VisualEditor from '@/components/feature/VisualEditor'
import SubtitleConfig from '@/components/domain/SubtitleConfig'
import LogoConfig from '@/components/domain/LogoConfig'
import { configurationsApi } from '@/services/api/configurations'
import { useDebounce } from '@/hooks/useDebounce'
import { toast } from '@/services/toast'
import { VisualConfig } from '@/types/configuration'

export default function VisualConfigPage({ params }: { params: { id: string } }) {
  const router = useRouter()
  const projectId = params.id

  // è¼‰å…¥ç¾æœ‰é…ç½®
  const { data: existingConfig, isLoading } = useQuery({
    queryKey: ['visual-config', projectId],
    queryFn: () => configurationsApi.getByProject(projectId),
  })

  // é è¨­é…ç½®
  const defaultConfig: VisualConfig = {
    subtitle: {
      font_family: 'Noto Sans TC',
      font_size: 48,
      font_color: '#FFFFFF',
      position: 'bottom-center',
      border_enabled: false,
      border_color: '#000000',
      border_width: 2,
      shadow_enabled: true,
      shadow_color: '#000000',
      shadow_offset_x: 2,
      shadow_offset_y: 2,
      background_enabled: false,
      background_color: '#000000',
      background_opacity: 70,
    },
    logo: {
      logo_file: null,
      logo_x: 50,
      logo_y: 50,
      logo_size: 100,
      logo_opacity: 100,
    },
    overlays: []
  }

  const [config, setConfig] = useState<VisualConfig>(existingConfig || defaultConfig)

  // ç•¶è¼‰å…¥å®Œæˆå¾Œæ›´æ–° config
  useEffect(() => {
    if (existingConfig) {
      setConfig(existingConfig)
    }
  }, [existingConfig])

  // Debounced config (1 ç§’å»¶é²)
  const debouncedConfig = useDebounce(config, 1000)

  // è‡ªå‹•å„²å­˜ mutation
  const saveMutation = useMutation({
    mutationFn: (data: VisualConfig) =>
      configurationsApi.saveVisualConfig(projectId, data),
    onSuccess: () => {
      toast.success('é…ç½®å·²è‡ªå‹•å„²å­˜', { duration: 2000 })
    },
    onError: () => {
      toast.error('é…ç½®å„²å­˜å¤±æ•—')
    }
  })

  // è‡ªå‹•å„²å­˜æ•ˆæœ
  useEffect(() => {
    if (debouncedConfig !== defaultConfig) {
      saveMutation.mutate(debouncedConfig)
    }
  }, [debouncedConfig])

  // è¼‰å…¥æ¨¡æ¿
  const handleLoadTemplate = async (templateId: string) => {
    try {
      const template = await configurationsApi.getTemplate(templateId)
      setConfig(template.config)
      toast.success('æ¨¡æ¿å·²è¼‰å…¥')
    } catch (error) {
      toast.error('æ‰¾ä¸åˆ°æ¨¡æ¿')
    }
  }

  // å„²å­˜ç‚ºæ¨¡æ¿
  const handleSaveAsTemplate = async (templateName: string) => {
    try {
      await configurationsApi.createTemplate({
        name: templateName,
        config: config
      })
      toast.success('æ¨¡æ¿å·²å„²å­˜')
    } catch (error) {
      toast.error('æ¨¡æ¿å„²å­˜å¤±æ•—')
    }
  }

  // ä¸‹ä¸€æ­¥
  const handleNext = () => {
    router.push(`/project/${projectId}/configure/prompt-model`)
  }

  if (isLoading) {
    return (
      <AppLayout>
        <div className="flex items-center justify-center h-screen">
          <Spinner size="large" />
        </div>
      </AppLayout>
    )
  }

  return (
    <AppLayout>
      <Breadcrumb
        items={[
          { label: 'ä¸»æ§å°', href: '/' },
          { label: 'æ–°å¢å°ˆæ¡ˆ', href: '/project/new' },
          { label: 'è¦–è¦ºåŒ–é…ç½®' }
        ]}
      />

      <div className="flex gap-6 p-6 h-[calc(100vh-200px)]">
        {/* å·¦å´ï¼šé è¦½å€ (60%) */}
        <div className="w-3/5">
          <VisualEditor
            config={config}
            onChange={setConfig}
          />
        </div>

        {/* å³å´ï¼šé…ç½®é¢æ¿ (40%) */}
        <div className="w-2/5 overflow-y-auto space-y-4">
          {/* æ¨¡æ¿ç®¡ç† */}
          <Card title="æ¨¡æ¿">
            <div className="flex gap-2">
              <Button onClick={() => {/* é¡¯ç¤ºæ¨¡æ¿é¸æ“‡ Modal */}}>
                è¼‰å…¥æ¨¡æ¿
              </Button>
              <Button onClick={() => {/* é¡¯ç¤ºå„²å­˜æ¨¡æ¿ Modal */}}>
                å„²å­˜ç‚ºæ¨¡æ¿
              </Button>
            </div>
          </Card>

          {/* å­—å¹•è¨­å®š */}
          <Card title="å­—å¹•è¨­å®š">
            <SubtitleConfig
              config={config.subtitle}
              onChange={(subtitle) => setConfig({ ...config, subtitle })}
            />
          </Card>

          {/* Logo è¨­å®š */}
          <Card title="Logo è¨­å®š">
            <LogoConfig
              config={config.logo}
              onChange={(logo) => setConfig({ ...config, logo })}
            />
          </Card>
        </div>
      </div>

      {/* åº•éƒ¨æ“ä½œæŒ‰éˆ• */}
      <div className="flex justify-between px-6 pb-6 border-t pt-4">
        <Button onClick={() => router.back()}>
          ä¸Šä¸€æ­¥
        </Button>

        <div className="flex gap-3">
          <Button onClick={() => saveMutation.mutate(config)}>
            å„²å­˜é…ç½®
          </Button>
          <Button type="primary" onClick={handleNext}>
            ä¸‹ä¸€æ­¥
          </Button>
        </div>
      </div>
    </AppLayout>
  )
}
```

---

#### 3. è¦–è¦ºç·¨è¼¯å™¨å…ƒä»¶

**æª”æ¡ˆï¼š** `frontend/components/feature/VisualEditor/VisualEditor.tsx`

**è·è²¬ï¼š** Konva.js é è¦½ç•«å¸ƒï¼Œæ”¯æ´æ‹–æ‹½å®šä½

**å¯¦ä½œæ¦‚è¦ï¼š**

```tsx
'use client'

import { useRef, useEffect } from 'react'
import Konva from 'konva'
import { Stage, Layer, Rect, Text, Image } from 'react-konva'
import { VisualConfig } from '@/types/configuration'

interface VisualEditorProps {
  config: VisualConfig
  onChange: (config: VisualConfig) => void
}

export default function VisualEditor({ config, onChange }: VisualEditorProps) {
  const stageRef = useRef<Konva.Stage>(null)

  // 16:9 é è¦½å°ºå¯¸
  const previewWidth = 960
  const previewHeight = 540

  // å­—å¹•æ‹–æ‹½è™•ç†
  const handleSubtitleDragEnd = (e: Konva.KonvaEventObject<DragEvent>) => {
    const node = e.target
    onChange({
      ...config,
      subtitle: {
        ...config.subtitle,
        position_x: node.x(),
        position_y: node.y(),
      }
    })
  }

  // Logo æ‹–æ‹½è™•ç†
  const handleLogoDragEnd = (e: Konva.KonvaEventObject<DragEvent>) => {
    const node = e.target
    onChange({
      ...config,
      logo: {
        ...config.logo,
        logo_x: node.x(),
        logo_y: node.y(),
      }
    })
  }

  return (
    <div className="border rounded-lg overflow-hidden bg-gray-900">
      <Stage
        ref={stageRef}
        width={previewWidth}
        height={previewHeight}
      >
        <Layer>
          {/* èƒŒæ™¯ */}
          <Rect
            x={0}
            y={0}
            width={previewWidth}
            height={previewHeight}
            fill="#000000"
          />

          {/* å­—å¹•é è¦½ */}
          <Text
            x={calculateSubtitleX(config.subtitle.position)}
            y={calculateSubtitleY(config.subtitle.position)}
            text="ç¯„ä¾‹å­—å¹•"
            fontFamily={config.subtitle.font_family}
            fontSize={config.subtitle.font_size}
            fill={config.subtitle.font_color}
            stroke={config.subtitle.border_enabled ? config.subtitle.border_color : undefined}
            strokeWidth={config.subtitle.border_enabled ? config.subtitle.border_width : 0}
            shadowEnabled={config.subtitle.shadow_enabled}
            shadowColor={config.subtitle.shadow_color}
            shadowOffsetX={config.subtitle.shadow_offset_x}
            shadowOffsetY={config.subtitle.shadow_offset_y}
            draggable
            onDragEnd={handleSubtitleDragEnd}
          />

          {/* Logo é è¦½ */}
          {config.logo.logo_file && (
            <Image
              x={config.logo.logo_x}
              y={config.logo.logo_y}
              width={config.logo.logo_size}
              height={config.logo.logo_size}
              opacity={config.logo.logo_opacity / 100}
              draggable
              onDragEnd={handleLogoDragEnd}
            />
          )}
        </Layer>
      </Stage>
    </div>
  )
}

// è¨ˆç®—å­—å¹•ä½ç½®çš„è¼”åŠ©å‡½æ•¸
function calculateSubtitleX(position: string): number {
  if (position.includes('center')) return 480 // ä¸­é–“
  if (position.includes('left')) return 50
  if (position.includes('right')) return 910
  return 480
}

function calculateSubtitleY(position: string): number {
  if (position.includes('top')) return 50
  if (position.includes('bottom')) return 490
  if (position.includes('center')) return 270
  return 490
}
```

---

#### 4. å­—å¹•é…ç½®å…ƒä»¶

**æª”æ¡ˆï¼š** `frontend/components/domain/SubtitleConfig/SubtitleConfig.tsx`

**è·è²¬ï¼š** å­—å¹•æ¨£å¼é…ç½®é¢æ¿

**å¯¦ä½œæ¦‚è¦ï¼š**

```tsx
import { SubtitleConfig as SubtitleConfigType } from '@/types/configuration'
import Select from '@/components/ui/Select'
import Slider from '@/components/ui/Slider'
import ColorPicker from '@/components/ui/ColorPicker'
import Checkbox from '@/components/ui/Checkbox'

interface SubtitleConfigProps {
  config: SubtitleConfigType
  onChange: (config: SubtitleConfigType) => void
}

export default function SubtitleConfig({ config, onChange }: SubtitleConfigProps) {
  return (
    <div className="space-y-4">
      {/* å­—å‹ */}
      <div>
        <label className="block text-sm font-medium mb-2">å­—å‹</label>
        <Select
          value={config.font_family}
          onChange={(value) => onChange({ ...config, font_family: value })}
          options={[
            { label: 'Noto Sans TC', value: 'Noto Sans TC' },
            { label: 'Microsoft JhengHei', value: 'Microsoft JhengHei' },
            { label: 'Arial', value: 'Arial' },
          ]}
        />
      </div>

      {/* å­—é«”å¤§å° */}
      <div>
        <label className="block text-sm font-medium mb-2">
          å­—é«”å¤§å°: {config.font_size}px
        </label>
        <Slider
          value={config.font_size}
          min={20}
          max={100}
          onChange={(value) => onChange({ ...config, font_size: value })}
        />
      </div>

      {/* é¡è‰² */}
      <div>
        <label className="block text-sm font-medium mb-2">é¡è‰²</label>
        <ColorPicker
          value={config.font_color}
          onChange={(value) => onChange({ ...config, font_color: value })}
        />
      </div>

      {/* é‚Šæ¡† */}
      <div>
        <Checkbox
          checked={config.border_enabled}
          onChange={(checked) => onChange({ ...config, border_enabled: checked })}
          label="å•Ÿç”¨é‚Šæ¡†"
        />

        {config.border_enabled && (
          <div className="mt-2 space-y-2 ml-6">
            <ColorPicker
              label="é‚Šæ¡†é¡è‰²"
              value={config.border_color}
              onChange={(value) => onChange({ ...config, border_color: value })}
            />
            <Slider
              label={`é‚Šæ¡†å¯¬åº¦: ${config.border_width}px`}
              value={config.border_width}
              min={1}
              max={10}
              onChange={(value) => onChange({ ...config, border_width: value })}
            />
          </div>
        )}
      </div>

      {/* é™°å½± */}
      <div>
        <Checkbox
          checked={config.shadow_enabled}
          onChange={(checked) => onChange({ ...config, shadow_enabled: checked })}
          label="å•Ÿç”¨é™°å½±"
        />

        {config.shadow_enabled && (
          <div className="mt-2 space-y-2 ml-6">
            <ColorPicker
              label="é™°å½±é¡è‰²"
              value={config.shadow_color}
              onChange={(value) => onChange({ ...config, shadow_color: value })}
            />
            <Slider
              label={`X åç§»: ${config.shadow_offset_x}px`}
              value={config.shadow_offset_x}
              min={-20}
              max={20}
              onChange={(value) => onChange({ ...config, shadow_offset_x: value })}
            />
            <Slider
              label={`Y åç§»: ${config.shadow_offset_y}px`}
              value={config.shadow_offset_y}
              min={-20}
              max={20}
              onChange={(value) => onChange({ ...config, shadow_offset_y: value })}
            />
          </div>
        )}
      </div>
    </div>
  )
}
```

---

#### 5. Logo é…ç½®å…ƒä»¶

**æª”æ¡ˆï¼š** `frontend/components/domain/LogoConfig/LogoConfig.tsx`

**è·è²¬ï¼š** Logo ä¸Šå‚³èˆ‡å®šä½é…ç½®

**å¯¦ä½œæ¦‚è¦ï¼š**

```tsx
import { LogoConfig as LogoConfigType } from '@/types/configuration'
import FileUpload from '@/components/ui/FileUpload'
import Slider from '@/components/ui/Slider'
import { toast } from '@/services/toast'

interface LogoConfigProps {
  config: LogoConfigType
  onChange: (config: LogoConfigType) => void
}

export default function LogoConfig({ config, onChange }: LogoConfigProps) {
  const handleFileUpload = async (files: File[]) => {
    const file = files[0]

    // é©—è­‰æª”æ¡ˆæ ¼å¼
    const allowedTypes = ['image/png', 'image/jpeg', 'image/svg+xml']
    if (!allowedTypes.includes(file.type)) {
      toast.error('æª”æ¡ˆå¿…é ˆç‚º PNG, JPG æˆ– SVG æ ¼å¼')
      return
    }

    // è®€å–æª”æ¡ˆç‚º Data URL
    const reader = new FileReader()
    reader.onload = (e) => {
      onChange({
        ...config,
        logo_file: e.target?.result as string
      })
      toast.success('Logo å·²ä¸Šå‚³')
    }
    reader.readAsDataURL(file)
  }

  return (
    <div className="space-y-4">
      {/* ä¸Šå‚³ Logo */}
      <div>
        <label className="block text-sm font-medium mb-2">ä¸Šå‚³ Logo</label>
        <FileUpload
          accept=".png,.jpg,.jpeg,.svg"
          onFileSelect={handleFileUpload}
        />
        <p className="text-xs text-gray-500 mt-1">
          æ”¯æ´ PNG, JPG, SVG æ ¼å¼
        </p>
      </div>

      {/* Logo é è¦½ */}
      {config.logo_file && (
        <div className="border rounded p-2">
          <img
            src={config.logo_file}
            alt="Logo é è¦½"
            className="max-w-full h-auto"
            style={{ maxHeight: '100px' }}
          />
        </div>
      )}

      {/* Logo å¤§å° */}
      {config.logo_file && (
        <>
          <div>
            <label className="block text-sm font-medium mb-2">
              å¤§å°: {config.logo_size}px
            </label>
            <Slider
              value={config.logo_size}
              min={10}
              max={200}
              onChange={(value) => onChange({ ...config, logo_size: value })}
            />
          </div>

          {/* Logo é€æ˜åº¦ */}
          <div>
            <label className="block text-sm font-medium mb-2">
              é€æ˜åº¦: {config.logo_opacity}%
            </label>
            <Slider
              value={config.logo_opacity}
              min={0}
              max={100}
              onChange={(value) => onChange({ ...config, logo_opacity: value })}
            />
          </div>
        </>
      )}
    </div>
  )
}
```

---

#### 6. useDebounce Hook

**æª”æ¡ˆï¼š** `frontend/hooks/useDebounce.ts`

**è·è²¬ï¼š** Debounce hook ç”¨æ–¼è‡ªå‹•å„²å­˜

**å¯¦ä½œï¼š**

```typescript
import { useEffect, useState } from 'react'

export function useDebounce<T>(value: T, delay: number): T {
  const [debouncedValue, setDebouncedValue] = useState<T>(value)

  useEffect(() => {
    const handler = setTimeout(() => {
      setDebouncedValue(value)
    }, delay)

    return () => {
      clearTimeout(handler)
    }
  }, [value, delay])

  return debouncedValue
}
```

---

#### 7. Configuration API æœå‹™

**æª”æ¡ˆï¼š** `frontend/services/api/configurations.ts`

**è·è²¬ï¼š** é…ç½® API å‘¼å«

**å¯¦ä½œï¼š**

```typescript
import { apiClient } from './client'
import { VisualConfig } from '@/types/configuration'

export const configurationsApi = {
  // å–å¾—å°ˆæ¡ˆçš„è¦–è¦ºé…ç½®
  getByProject: async (projectId: string): Promise<VisualConfig> => {
    const response = await apiClient.get(`/api/v1/projects/${projectId}/configuration`)
    return response.data
  },

  // å„²å­˜è¦–è¦ºé…ç½®
  saveVisualConfig: async (projectId: string, config: VisualConfig): Promise<void> => {
    await apiClient.put(`/api/v1/projects/${projectId}/configuration`, config)
  },

  // å–å¾—æ¨¡æ¿
  getTemplate: async (templateId: string): Promise<{ id: string; name: string; config: VisualConfig }> => {
    const response = await apiClient.get(`/api/v1/templates/${templateId}`)
    return response.data
  },

  // å»ºç«‹æ¨¡æ¿
  createTemplate: async (data: { name: string; config: VisualConfig }): Promise<void> => {
    await apiClient.post('/api/v1/templates', data)
  },
}
```

---

## é–‹ç™¼æŒ‡å¼•

### TDD é–‹ç™¼æµç¨‹

#### Step 1: ç’°å¢ƒæº–å‚™ï¼ˆ10 åˆ†é˜ï¼‰

1. ç¢ºèª Task-017, Task-018, Task-019 å·²å®Œæˆ
2. ç¢ºèªæ¸¬è©¦ç’°å¢ƒå¯é‹è¡Œï¼š`npm run test`
3. é–±è®€ `tech-specs/frontend/pages.md#3-æ–°å¢å°ˆæ¡ˆé -new-project`
4. é–±è®€ `tech-specs/frontend/pages.md#4-è¦–è¦ºåŒ–é…ç½®é -visual-config`
5. é–±è®€ `product-design/pages.md#Page-3` å’Œ `#Page-4`

#### Step 2: æ’°å¯«è¡¨å–®é©—è­‰æ¸¬è©¦ï¼ˆ30 åˆ†é˜ï¼‰

1. å»ºç«‹ `frontend/app/project/new/__tests__/page.test.tsx`
2. æ’°å¯«ã€Œæ¸¬è©¦ 1ï¼šå°ˆæ¡ˆåç¨±é©—è­‰ã€ï¼ˆ3 å€‹æ¸¬è©¦æ¡ˆä¾‹ï¼‰
3. æ’°å¯«ã€Œæ¸¬è©¦ 2ï¼šæ–‡å­—å…§å®¹é•·åº¦é©—è­‰ã€ï¼ˆ5 å€‹æ¸¬è©¦æ¡ˆä¾‹ï¼‰
4. åŸ·è¡Œæ¸¬è©¦ â†’ å¤±æ•—ï¼ˆé æœŸï¼Œå°šæœªå¯¦ä½œï¼‰

#### Step 3: å¯¦ä½œæ–°å¢å°ˆæ¡ˆé åŸºç¤æ¶æ§‹ï¼ˆ1 å°æ™‚ï¼‰

1. å»ºç«‹ `frontend/app/project/new/page.tsx`
2. å®šç¾© Zod schema (`projectFormSchema`)
3. å»ºç«‹åŸºæœ¬è¡¨å–®çµæ§‹ï¼ˆå°ˆæ¡ˆåç¨±ã€æ–‡å­—ä¾†æºã€æ–‡å­—å…§å®¹ï¼‰
4. å¯¦ä½œè¡¨å–®é©—è­‰é‚è¼¯
5. åŸ·è¡Œæ¸¬è©¦ 1 å’Œæ¸¬è©¦ 2 â†’ é€šé âœ…

#### Step 4: æ’°å¯«æª”æ¡ˆä¸Šå‚³æ¸¬è©¦ï¼ˆ20 åˆ†é˜ï¼‰

1. æ’°å¯«ã€Œæ¸¬è©¦ 3ï¼šæª”æ¡ˆä¸Šå‚³é©—è­‰ã€ï¼ˆ5 å€‹æ¸¬è©¦æ¡ˆä¾‹ï¼‰
2. åŸ·è¡Œæ¸¬è©¦ â†’ å¤±æ•—

#### Step 5: å¯¦ä½œæª”æ¡ˆä¸Šå‚³åŠŸèƒ½ï¼ˆ45 åˆ†é˜ï¼‰

1. å¯¦ä½œ `handleFileUpload` å‡½æ•¸
2. æª”æ¡ˆæ ¼å¼é©—è­‰ï¼ˆ.txt, .mdï¼‰
3. æª”æ¡ˆå¤§å°é©—è­‰ï¼ˆ< 10MBï¼‰
4. æª”æ¡ˆå…§å®¹é•·åº¦é©—è­‰ï¼ˆ500-10000 å­—ï¼‰
5. åŸ·è¡Œæ¸¬è©¦ 3 â†’ é€šé âœ…

#### Step 6: å¯¦ä½œå°ˆæ¡ˆå‰µå»º API æ•´åˆï¼ˆ30 åˆ†é˜ï¼‰

1. å»ºç«‹ `frontend/services/api/projects.ts`
2. å¯¦ä½œ `projectsApi.create` æ–¹æ³•
3. æ•´åˆ TanStack Query mutation
4. æˆåŠŸå¾Œè·³è½‰åˆ°è¦–è¦ºé…ç½®é 
5. æ‰‹å‹•æ¸¬è©¦å®Œæ•´æµç¨‹

#### Step 7: æ’°å¯«è¦–è¦ºé…ç½®æ¸¬è©¦ï¼ˆ30 åˆ†é˜ï¼‰

1. å»ºç«‹ `frontend/app/project/[id]/configure/visual/__tests__/page.test.tsx`
2. æ’°å¯«ã€Œæ¸¬è©¦ 4ï¼šè¦–è¦ºé…ç½®å³æ™‚é è¦½ã€ï¼ˆ3 å€‹æ¸¬è©¦æ¡ˆä¾‹ï¼‰
3. æ’°å¯«ã€Œæ¸¬è©¦ 5ï¼šè‡ªå‹•å„²å­˜æ©Ÿåˆ¶ã€ï¼ˆ2 å€‹æ¸¬è©¦æ¡ˆä¾‹ï¼‰
4. åŸ·è¡Œæ¸¬è©¦ â†’ å¤±æ•—

#### Step 8: å¯¦ä½œè¦–è¦ºé…ç½®é åŸºç¤æ¶æ§‹ï¼ˆ2 å°æ™‚ï¼‰

1. å»ºç«‹ `frontend/app/project/[id]/configure/visual/page.tsx`
2. å®šç¾© `VisualConfig` å‹åˆ¥
3. å¯¦ä½œåŸºæœ¬ä½ˆå±€ï¼ˆå·¦å³åˆ†æ¬„ï¼‰
4. å¯¦ä½œ `useDebounce` hook
5. å¯¦ä½œè‡ªå‹•å„²å­˜é‚è¼¯
6. åŸ·è¡Œæ¸¬è©¦ 5 â†’ é€šé âœ…

#### Step 9: å¯¦ä½œè¦–è¦ºç·¨è¼¯å™¨å…ƒä»¶ï¼ˆ3 å°æ™‚ï¼‰

1. å®‰è£ä¾è³´ï¼š`npm install react-konva konva`
2. å»ºç«‹ `frontend/components/feature/VisualEditor/VisualEditor.tsx`
3. å¯¦ä½œ Konva Stage å’Œ Layer
4. å¯¦ä½œå­—å¹•é è¦½ï¼ˆText å…ƒä»¶ï¼‰
5. å¯¦ä½œ Logo é è¦½ï¼ˆImage å…ƒä»¶ï¼‰
6. å¯¦ä½œæ‹–æ‹½åŠŸèƒ½
7. åŸ·è¡Œæ¸¬è©¦ 4 â†’ é€šé âœ…

#### Step 10: å¯¦ä½œå­—å¹•é…ç½®å…ƒä»¶ï¼ˆ1.5 å°æ™‚ï¼‰

1. å»ºç«‹ `frontend/components/domain/SubtitleConfig/SubtitleConfig.tsx`
2. å¯¦ä½œå­—å‹é¸æ“‡å™¨
3. å¯¦ä½œå­—é«”å¤§å°æ»‘æ¡¿
4. å¯¦ä½œé¡è‰²é¸æ“‡å™¨
5. å¯¦ä½œé‚Šæ¡†é…ç½®
6. å¯¦ä½œé™°å½±é…ç½®
7. å¯¦ä½œèƒŒæ™¯æ¡†é…ç½®
8. æ¸¬è©¦èˆ‡é è¦½å€çš„å³æ™‚åŒæ­¥

#### Step 11: å¯¦ä½œ Logo é…ç½®å…ƒä»¶ï¼ˆ1 å°æ™‚ï¼‰

1. å»ºç«‹ `frontend/components/domain/LogoConfig/LogoConfig.tsx`
2. å¯¦ä½œæª”æ¡ˆä¸Šå‚³
3. å¯¦ä½œ Logo é è¦½
4. å¯¦ä½œå¤§å°æ»‘æ¡¿
5. å¯¦ä½œé€æ˜åº¦æ»‘æ¡¿
6. æ¸¬è©¦èˆ‡é è¦½å€çš„å³æ™‚åŒæ­¥

#### Step 12: æ’°å¯«æ¨¡æ¿ç®¡ç†æ¸¬è©¦ï¼ˆ20 åˆ†é˜ï¼‰

1. æ’°å¯«ã€Œæ¸¬è©¦ 6ï¼šæ¨¡æ¿è¼‰å…¥èˆ‡å„²å­˜ã€ï¼ˆ3 å€‹æ¸¬è©¦æ¡ˆä¾‹ï¼‰
2. åŸ·è¡Œæ¸¬è©¦ â†’ å¤±æ•—

#### Step 13: å¯¦ä½œæ¨¡æ¿ç®¡ç†åŠŸèƒ½ï¼ˆ1 å°æ™‚ï¼‰

1. å¯¦ä½œ `handleLoadTemplate` å‡½æ•¸
2. å¯¦ä½œ `handleSaveAsTemplate` å‡½æ•¸
3. å»ºç«‹æ¨¡æ¿é¸æ“‡ Modal
4. å»ºç«‹å„²å­˜æ¨¡æ¿ Modal
5. åŸ·è¡Œæ¸¬è©¦ 6 â†’ é€šé âœ…

#### Step 14: æ•´åˆæ¸¬è©¦ï¼ˆ2 å°æ™‚ï¼‰

1. æ’°å¯«ã€Œæ¸¬è©¦ 7ï¼šå®Œæ•´æ–°å¢å°ˆæ¡ˆæµç¨‹ã€
2. æ‰‹å‹•æ¸¬è©¦å®Œæ•´æµç¨‹ï¼š
   - æ–°å¢å°ˆæ¡ˆ â†’ è¦–è¦ºé…ç½® â†’ Prompt è¨­å®š
3. ä¿®æ­£ç™¼ç¾çš„å•é¡Œ
4. åŸ·è¡Œæ‰€æœ‰æ¸¬è©¦ â†’ å…¨éƒ¨é€šé âœ…

#### Step 15: éŸ¿æ‡‰å¼è¨­è¨ˆï¼ˆ2 å°æ™‚ï¼‰

1. å¯¦ä½œæ¡Œé¢ç‰ˆä½ˆå±€ï¼ˆâ‰¥1024pxï¼‰
2. å¯¦ä½œå¹³æ¿ç‰ˆä½ˆå±€ï¼ˆ768-1023pxï¼‰
3. å¯¦ä½œæ‰‹æ©Ÿç‰ˆä½ˆå±€ï¼ˆ<768pxï¼‰
   - é è¦½å€å’Œé…ç½®é¢æ¿æ”¹ç‚ºä¸Šä¸‹å †ç–Š
   - æ‹–æ‹½åŠŸèƒ½æ”¹ç‚ºæ•¸å€¼è¼¸å…¥
4. æ¸¬è©¦å„å°ºå¯¸ä¸‹çš„é¡¯ç¤ºæ•ˆæœ

#### Step 16: æ•ˆèƒ½å„ªåŒ–ï¼ˆ1 å°æ™‚ï¼‰

1. ä½¿ç”¨ `React.memo` å„ªåŒ–å…ƒä»¶
2. å„ªåŒ– Konva æ¸²æŸ“æ•ˆèƒ½
3. å¯¦ä½œè™›æ“¬åŒ–ï¼ˆå¦‚éœ€è¦ï¼‰
4. æ¸¬è©¦é…ç½®è®Šæ›´åˆ°é è¦½æ›´æ–°çš„å»¶é²ï¼ˆ< 100msï¼‰

#### Step 17: éŒ¯èª¤è™•ç†èˆ‡ UX å„ªåŒ–ï¼ˆ1.5 å°æ™‚ï¼‰

1. å¯¦ä½œè¼‰å…¥ç‹€æ…‹ï¼ˆSkeletonï¼‰
2. å¯¦ä½œéŒ¯èª¤ç‹€æ…‹é¡¯ç¤º
3. å¯¦ä½œæˆåŠŸ/å¤±æ•— Toast é€šçŸ¥
4. å¯¦ä½œé›¢é–‹ç¢ºèª Modalï¼ˆæœ‰æœªå„²å­˜è®Šæ›´æ™‚ï¼‰
5. å¯¦ä½œå°é½Šè¼”åŠ©ç·šï¼ˆæ‹–æ‹½æ™‚é¡¯ç¤ºï¼‰

#### Step 18: æ–‡ä»¶èˆ‡æª¢æŸ¥ï¼ˆ30 åˆ†é˜ï¼‰

1. æª¢æŸ¥æ¸¬è©¦è¦†è“‹ç‡ï¼š`npm run test:coverage`ï¼ˆç›®æ¨™ > 80%ï¼‰
2. åŸ·è¡Œ ESLintï¼š`npm run lint`
3. åŸ·è¡Œ TypeScript æª¢æŸ¥ï¼š`npm run type-check`
4. æ›´æ–°å…ƒä»¶æ–‡æª”ï¼ˆå¦‚éœ€è¦ï¼‰
5. æˆªåœ–è¨˜éŒ„å¯¦ä½œæˆæœ

---

## æ³¨æ„äº‹é …

### æŠ€è¡“é™·é˜±

#### âš ï¸ Konva.js æ•ˆèƒ½å•é¡Œ
- **å•é¡Œï¼š** éå¤šå…ƒç´ æˆ–é »ç¹æ›´æ–°æœƒå°è‡´å¡é “
- **è§£æ±ºï¼š**
  - ä½¿ç”¨ `React.memo` é˜²æ­¢ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“
  - é¿å…åœ¨æ‹–æ‹½æ™‚é »ç¹æ›´æ–°ç‹€æ…‹
  - ä½¿ç”¨ `requestAnimationFrame` å„ªåŒ–å‹•ç•«

#### âš ï¸ æª”æ¡ˆä¸Šå‚³å®‰å…¨æ€§
- **å•é¡Œï¼š** ç”¨æˆ¶å¯èƒ½ä¸Šå‚³æƒ¡æ„æª”æ¡ˆ
- **è§£æ±ºï¼š**
  - é©—è­‰æª”æ¡ˆ MIME type
  - é™åˆ¶æª”æ¡ˆå¤§å°
  - ä¸ç›´æ¥åŸ·è¡Œæª”æ¡ˆå…§å®¹
  - ä½¿ç”¨ Data URL è€Œéç›´æ¥è®€å–

#### âš ï¸ Debounce èˆ‡ React ç‹€æ…‹
- **å•é¡Œï¼š** Debounce å¯èƒ½å°è‡´ç‹€æ…‹ä¸åŒæ­¥
- **è§£æ±ºï¼š**
  - ä½¿ç”¨ `useDebounce` hook è€Œéæ‰‹å‹•å¯¦ä½œ
  - ç¢ºä¿ debounced value å’ŒåŸå§‹ value åˆ†é–‹ç®¡ç†
  - åœ¨ cleanup æ™‚å–æ¶ˆ pending çš„ timeout

### æ•ˆèƒ½è€ƒé‡

#### ğŸ’¡ é è¦½å€æ›´æ–°é »ç‡
- ç›®æ¨™ï¼šé…ç½®è®Šæ›´åˆ°é è¦½æ›´æ–° < 100ms
- ç­–ç•¥ï¼š
  - ä½¿ç”¨ Konva çš„é«˜æ•ˆæ¸²æŸ“
  - é¿å…æ•´å€‹ Stage é‡æ–°æ¸²æŸ“
  - åƒ…æ›´æ–°è®Šæ›´çš„å…ƒç´ 

#### ğŸ’¡ è‡ªå‹•å„²å­˜é »ç‡
- Debounce å»¶é²ï¼š1 ç§’
- é¿å…éæ–¼é »ç¹çš„ API å‘¼å«
- å¤±æ•—æ™‚é¡¯ç¤ºéŒ¯èª¤ä½†ä¸é˜»æ“‹ç”¨æˆ¶æ“ä½œ

### å®‰å…¨æ€§æª¢æŸ¥

#### âœ… è¼¸å…¥é©—è­‰
- å°ˆæ¡ˆåç¨±é•·åº¦é™åˆ¶ï¼ˆ1-100 å­—å…ƒï¼‰
- æ–‡å­—å…§å®¹é•·åº¦é™åˆ¶ï¼ˆ500-10000 å­—ï¼‰
- æª”æ¡ˆå¤§å°é™åˆ¶ï¼ˆ< 10MBï¼‰
- æª”æ¡ˆæ ¼å¼é™åˆ¶ï¼ˆ.txt, .md, .png, .jpg, .svgï¼‰

#### âœ… XSS é˜²è­·
- ä½¿ç”¨ React çš„è‡ªå‹•è½‰ç¾©
- ä¸ç›´æ¥æ’å…¥ HTML
- é©—è­‰ç”¨æˆ¶è¼¸å…¥

### æ•´åˆé»

#### ğŸ”— èˆ‡ Task-019 çš„æ•´åˆ
- ä½¿ç”¨ `projectsApi.create` å‰µå»ºå°ˆæ¡ˆ
- ä½¿ç”¨ `configurationsApi.saveVisualConfig` å„²å­˜é…ç½®
- ä½¿ç”¨ TanStack Query ç®¡ç† API ç‹€æ…‹

#### ğŸ”— èˆ‡ Task-023 çš„æ•´åˆ
- è¦–è¦ºé…ç½®å®Œæˆå¾Œè·³è½‰åˆ° `/project/:id/configure/prompt-model`
- å‚³é projectId
- ç¢ºä¿é…ç½®å·²å„²å­˜

---

## å®Œæˆæª¢æŸ¥æ¸…å–®

### åŠŸèƒ½å®Œæ•´æ€§

#### Page-3: æ–°å¢å°ˆæ¡ˆé 
- [ ] å°ˆæ¡ˆåç¨±è¼¸å…¥èˆ‡é©—è­‰
- [ ] æ–‡å­—ä¾†æºåˆ‡æ›ï¼ˆä¸Šå‚³/è²¼ä¸Šï¼‰
- [ ] æ–‡å­—å…§å®¹ textarea
- [ ] å­—æ•¸çµ±è¨ˆå³æ™‚é¡¯ç¤º
- [ ] æª”æ¡ˆä¸Šå‚³ï¼ˆæ‹–æ‹½ + é»æ“Šï¼‰
- [ ] æª”æ¡ˆæ ¼å¼é©—è­‰
- [ ] æª”æ¡ˆå¤§å°é©—è­‰
- [ ] å…§å®¹é•·åº¦é©—è­‰
- [ ] éŒ¯èª¤è¨Šæ¯é¡¯ç¤º
- [ ] æˆåŠŸå¾Œè·³è½‰

#### Page-4: è¦–è¦ºåŒ–é…ç½®é 
- [ ] å·¦å³åˆ†æ¬„ä½ˆå±€
- [ ] Konva é è¦½å€
- [ ] å­—å¹•é…ç½®é¢æ¿
  - [ ] å­—å‹é¸æ“‡
  - [ ] å­—é«”å¤§å°æ»‘æ¡¿
  - [ ] é¡è‰²é¸æ“‡å™¨
  - [ ] ä½ç½®é¸æ“‡å™¨
  - [ ] é‚Šæ¡†é…ç½®
  - [ ] é™°å½±é…ç½®
  - [ ] èƒŒæ™¯æ¡†é…ç½®
- [ ] Logo é…ç½®é¢æ¿
  - [ ] æª”æ¡ˆä¸Šå‚³
  - [ ] å¤§å°æ»‘æ¡¿
  - [ ] é€æ˜åº¦æ»‘æ¡¿
- [ ] æ‹–æ‹½å®šä½åŠŸèƒ½
- [ ] å³æ™‚é è¦½ï¼ˆ< 100msï¼‰
- [ ] è‡ªå‹•å„²å­˜ï¼ˆ1 ç§’ debounceï¼‰
- [ ] æ¨¡æ¿è¼‰å…¥
- [ ] æ¨¡æ¿å„²å­˜
- [ ] æˆåŠŸå¾Œè·³è½‰

### æ¸¬è©¦
- [ ] æ¸¬è©¦ 1ï¼šå°ˆæ¡ˆåç¨±é©—è­‰ï¼ˆ3 å€‹æ¡ˆä¾‹ï¼‰é€šé
- [ ] æ¸¬è©¦ 2ï¼šæ–‡å­—å…§å®¹é•·åº¦é©—è­‰ï¼ˆ5 å€‹æ¡ˆä¾‹ï¼‰é€šé
- [ ] æ¸¬è©¦ 3ï¼šæª”æ¡ˆä¸Šå‚³é©—è­‰ï¼ˆ5 å€‹æ¡ˆä¾‹ï¼‰é€šé
- [ ] æ¸¬è©¦ 4ï¼šè¦–è¦ºé…ç½®å³æ™‚é è¦½ï¼ˆ3 å€‹æ¡ˆä¾‹ï¼‰é€šé
- [ ] æ¸¬è©¦ 5ï¼šè‡ªå‹•å„²å­˜æ©Ÿåˆ¶ï¼ˆ2 å€‹æ¡ˆä¾‹ï¼‰é€šé
- [ ] æ¸¬è©¦ 6ï¼šæ¨¡æ¿è¼‰å…¥èˆ‡å„²å­˜ï¼ˆ3 å€‹æ¡ˆä¾‹ï¼‰é€šé
- [ ] æ¸¬è©¦ 7ï¼šå®Œæ•´æµç¨‹æ•´åˆæ¸¬è©¦é€šé
- [ ] æ¸¬è©¦è¦†è“‹ç‡ > 80%

### ç¨‹å¼ç¢¼å“è³ª
- [ ] ESLint æª¢æŸ¥é€šéï¼š`npm run lint`
- [ ] TypeScript æª¢æŸ¥é€šéï¼š`npm run type-check`
- [ ] ç„¡ console.log æˆ–é™¤éŒ¯ç¨‹å¼ç¢¼
- [ ] æ‰€æœ‰å…ƒä»¶æœ‰ TypeScript å‹åˆ¥å®šç¾©
- [ ] é—œéµå‡½æ•¸æœ‰è¨»è§£

### éŸ¿æ‡‰å¼è¨­è¨ˆ
- [ ] æ¡Œé¢ï¼ˆâ‰¥1024pxï¼‰æ­£å¸¸é¡¯ç¤º
- [ ] å¹³æ¿ï¼ˆ768-1023pxï¼‰æ­£å¸¸é¡¯ç¤º
- [ ] æ‰‹æ©Ÿï¼ˆ<768pxï¼‰æ­£å¸¸é¡¯ç¤º
- [ ] æ‹–æ‹½åœ¨æ‰‹æ©Ÿä¸Šæ”¹ç‚ºæ•¸å€¼è¼¸å…¥

### æ•ˆèƒ½
- [ ] é…ç½®è®Šæ›´åˆ°é è¦½æ›´æ–° < 100ms
- [ ] ç„¡æ˜é¡¯å¡é “æˆ–å»¶é²
- [ ] è‡ªå‹•å„²å­˜ debounce æ­£å¸¸

### æ•´åˆ
- [ ] èˆ‡ Task-019 API æ•´åˆæ­£å¸¸
- [ ] èˆ‡ Task-023 é é¢è·³è½‰æ­£å¸¸
- [ ] ç‹€æ…‹ç®¡ç†æ­£å¸¸ï¼ˆZustandï¼‰
- [ ] è·¯ç”±å°èˆªæ­£å¸¸

### æ–‡ä»¶
- [ ] README æ›´æ–°ï¼ˆå¦‚éœ€è¦ï¼‰
- [ ] å…ƒä»¶æ–‡æª”å®Œæ•´
- [ ] API æœå‹™æ–‡æª”å®Œæ•´

---

## é ä¼°æ™‚é–“åˆ†é…

- ç’°å¢ƒæº–å‚™èˆ‡é–±è®€ï¼š10 åˆ†é˜
- æ’°å¯«æ¸¬è©¦ï¼ˆæ¸¬è©¦ 1-6ï¼‰ï¼š2 å°æ™‚
- å¯¦ä½œæ–°å¢å°ˆæ¡ˆé ï¼š2 å°æ™‚
- å¯¦ä½œè¦–è¦ºé…ç½®é åŸºç¤æ¶æ§‹ï¼š2 å°æ™‚
- å¯¦ä½œè¦–è¦ºç·¨è¼¯å™¨å…ƒä»¶ï¼š3 å°æ™‚
- å¯¦ä½œå­—å¹•é…ç½®å…ƒä»¶ï¼š1.5 å°æ™‚
- å¯¦ä½œ Logo é…ç½®å…ƒä»¶ï¼š1 å°æ™‚
- å¯¦ä½œæ¨¡æ¿ç®¡ç†åŠŸèƒ½ï¼š1 å°æ™‚
- æ•´åˆæ¸¬è©¦ï¼š2 å°æ™‚
- éŸ¿æ‡‰å¼è¨­è¨ˆï¼š2 å°æ™‚
- æ•ˆèƒ½å„ªåŒ–ï¼š1 å°æ™‚
- éŒ¯èª¤è™•ç†èˆ‡ UXï¼š1.5 å°æ™‚
- æ–‡ä»¶èˆ‡æª¢æŸ¥ï¼š30 åˆ†é˜

**ç¸½è¨ˆï¼šç´„ 19.5 å°æ™‚**ï¼ˆé ç•™ 0.5 å°æ™‚ buffer = 20 å°æ™‚ï¼‰

---

## åƒè€ƒè³‡æº

### å‰ç«¯æŠ€è¡“æ–‡æª”
- [Next.js 14 App Router](https://nextjs.org/docs/app)
- [React Konva](https://konvajs.org/docs/react/index.html)
- [Konva.js](https://konvajs.org/)
- [Zod](https://zod.dev/) - Schema é©—è­‰
- [TanStack Query](https://tanstack.com/query/latest)

### ç›¸é—œå¥—ä»¶æ–‡æª”
- [react-dnd](https://react-dnd.github.io/react-dnd/) - æ‹–æ‹½åŠŸèƒ½ï¼ˆå‚™é¸ï¼‰
- [react-color](https://casesandberg.github.io/react-color/) - é¡è‰²é¸æ“‡å™¨ï¼ˆå‚™é¸ï¼‰

### å°ˆæ¡ˆå…§éƒ¨æ–‡ä»¶
- `tech-specs/frontend/pages.md#3-æ–°å¢å°ˆæ¡ˆé -new-project`
- `tech-specs/frontend/pages.md#4-è¦–è¦ºåŒ–é…ç½®é -visual-config`
- `tech-specs/frontend/component-architecture.md`
- `product-design/pages.md#Page-3`
- `product-design/pages.md#Page-4`
- `product-design/flows.md#Flow-1`
- `product-design/flows.md#Flow-3`

---

**æº–å‚™å¥½äº†å—ï¼Ÿ** é–‹å§‹ä½¿ç”¨ TDD æ–¹å¼å¯¦ä½œ Page-3 å’Œ Page-4ï¼ğŸš€
