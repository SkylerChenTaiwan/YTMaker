# Issue-XXX: [問題簡述]

> **建立日期：** [日期]
> **狀態：** 🔴 Open / 🟡 In Progress / 🟢 Resolved / ⚫ Closed
> **優先級：** P0 緊急 / P1 高 / P2 中 / P3 低
> **分類：** Bug / Performance / Security / Design / Integration
> **負責人：** [名字]

---

## 問題描述

### 簡述
[用 1-2 句話描述問題]

### 詳細說明
[詳細描述遇到什麼問題，發生在什麼情況下]

### 發現時機
- **階段：** 開發 / 單元測試 / 整合測試 / E2E 測試 / 用戶測試
- **任務：** Task-XXX
- **檔案：** [相關檔案路徑]
- **功能：** [相關功能]

---

## 環境資訊

**環境：**
- 作業系統：[例如：macOS 13.0]
- Node.js 版本：[例如：18.0.0]
- 瀏覽器：[例如：Chrome 120]
- 資料庫：[例如：PostgreSQL 15]

**相關版本：**
- 專案版本/Commit：[git commit hash]
- 相關套件版本：[如果問題與特定套件相關]

---

## 重現步驟

### 前置條件
1. [需要什麼環境設定]
2. [需要什麼測試資料]
3. [需要什麼權限或狀態]

### 重現步驟
1. [步驟 1：例如，啟動應用程式]
2. [步驟 2：例如，進入登入頁面]
3. [步驟 3：例如，輸入帳號密碼]
4. [步驟 4：例如，點擊登入按鈕]

### 實際結果
[描述實際發生了什麼]

**錯誤訊息：**
```
[貼上完整的錯誤訊息或 stack trace]
```

**螢幕截圖/影片：**
[如果有的話，附上截圖或影片]

### 預期結果
[描述應該發生什麼]

**參考 Spec：**
- `tech-specs/[檔案名稱].md#[章節]`
- `product-design/[檔案名稱].md#[章節]`

---

## 影響評估

### 影響範圍
- **功能：** [哪些功能受影響]
- **用戶：** [哪些用戶會遇到這個問題]
- **頻率：** 每次 / 偶爾 / 特定條件下

### 嚴重程度
- [ ] 系統無法運作
- [ ] 核心功能無法使用
- [ ] 部分功能受影響
- [ ] UI/UX 問題
- [ ] 效能問題
- [ ] 其他：[說明]

### 是否有替代方案
- [ ] 有替代方案：[說明]
- [ ] 無替代方案

---

## 根因分析

### 初步分析
[初步判斷問題可能的原因]

### 詳細分析

#### 程式碼分析
**相關程式碼：** [檔案路徑:行數]

```typescript
// [貼上相關的程式碼片段]
```

**問題所在：**
[解釋程式碼哪裡有問題]

#### 資料流分析
```
[追蹤資料流，找出問題發生在哪個環節]

用戶輸入 → 前端驗證 → API 請求 → 後端驗證 → 業務邏輯 → 資料庫
                                          ↑
                                      問題發生點
```

#### 根本原因
[經過分析後，確定的根本原因是什麼]

**原因分類：**
- [ ] 程式碼邏輯錯誤
- [ ] Spec 定義不清楚
- [ ] 驗證規則遺漏
- [ ] 錯誤處理不當
- [ ] 設計缺陷
- [ ] 第三方服務問題
- [ ] 環境配置問題
- [ ] 其他：[說明]

---

## 解決方案

### 方案 1 (建議方案)

#### 概述
[簡述解決方案]

#### 詳細步驟
1. [步驟 1]
2. [步驟 2]
3. [步驟 3]

#### 需要修改的檔案
- `[檔案路徑 1]`：[修改內容]
- `[檔案路徑 2]`：[修改內容]

#### 需要更新的 Spec
- [ ] 需要更新 spec
  - 檔案：`[spec 檔案路徑]`
  - 原因：[為什麼需要更新]
  - 變更：[要改什麼]

- [ ] 不需要更新 spec

#### 程式碼變更

**檔案：** `[檔案路徑]`

**原本的程式碼：**
```typescript
// [原本的程式碼]
```

**修改後的程式碼：**
```typescript
// [修改後的程式碼]
```

**變更說明：**
[解釋為什麼這樣修改]

#### 測試計劃

**新增測試：**
```typescript
describe('[功能]', () => {
  it('應該[預期行為]', () => {
    // [測試程式碼]
  });
});
```

**修改現有測試：**
- [哪些測試需要修改]
- [為什麼需要修改]

#### 優點
- [優點 1]
- [優點 2]

#### 缺點
- [缺點 1]
- [缺點 2]

#### 風險評估
- 風險：[可能的風險]
- 緩解：[如何降低風險]

---

### 方案 2 (替代方案)

[如果有其他方案，用同樣格式描述]

---

### 方案比較

| 項目 | 方案 1 | 方案 2 |
|-----|--------|--------|
| 實作複雜度 | [低/中/高] | [低/中/高] |
| 修改範圍 | [小/中/大] | [小/中/大] |
| 效能影響 | [無/小/中/大] | [無/小/中/大] |
| 維護性 | [好/中/差] | [好/中/差] |
| 風險 | [低/中/高] | [低/中/高] |

**建議採用：** 方案 [X]

**理由：** [說明為什麼選這個方案]

---

## 實作記錄

### Spec 更新 (如適用)

**更新日期：** [日期]

**更新檔案：**
- `[spec 檔案 1]`
- `[spec 檔案 2]`

**更新內容：**
[簡述更新了什麼]

**Git Commit：** [commit hash]

---

### 程式碼修改

**修改日期：** [日期]

**修改檔案：**
- `[檔案 1]`
- `[檔案 2]`

**主要變更：**
1. [變更 1]
2. [變更 2]

**Git Commit：** [commit hash]

---

### 測試驗證

**測試日期：** [日期]

**執行的測試：**
- [ ] 單元測試
- [ ] 整合測試
- [ ] E2E 測試
- [ ] 手動測試

**測試結果：**
```
[貼上測試執行結果]
```

**驗證項目：**
- [ ] 原問題已解決
- [ ] 無新的錯誤
- [ ] 無效能退化
- [ ] 所有相關測試通過

---

## 預防措施

### 為什麼會發生這個問題
[反思為什麼會出現這個問題]

### 如何避免類似問題
1. [預防措施 1]
2. [預防措施 2]
3. [預防措施 3]

### 需要改進的地方
- **開發流程：** [如果開發流程需要改進]
- **測試策略：** [如果測試需要加強]
- **文件規範：** [如果文件需要更明確]
- **Code Review：** [如果審查需要更嚴格]

---

## 相關資源

### 相關 Issue
- Issue-XXX: [相關問題]

### 相關 Task
- Task-XXX: [相關任務]

### 參考文件
- [外部文件或資源連結]
- [Stack Overflow 討論]
- [官方文件]

### 討論記錄
[如果有團隊討論，記錄重點]

---

## 時間記錄

- **發現時間：** [時間]
- **開始處理：** [時間]
- **完成修復：** [時間]
- **驗證完成：** [時間]
- **總耗時：** [X 小時]

---

## 學習心得

### 技術收穫
[從這個問題中學到了什麼技術知識]

### 經驗總結
[有什麼經驗可以分享]

### 建議
[對未來開發的建議]

---

## 檢查清單

### 問題分析
- [ ] 可以穩定重現問題
- [ ] 找到根本原因
- [ ] 評估影響範圍

### 解決方案
- [ ] 提出至少一個解決方案
- [ ] 評估方案的優缺點
- [ ] 確認需要更新哪些 spec

### 實作
- [ ] 更新 spec (如需要)
- [ ] 修改程式碼
- [ ] 更新測試
- [ ] 程式碼審查

### 驗證
- [ ] 所有測試通過
- [ ] 問題確實解決
- [ ] 無副作用
- [ ] Spec 與程式碼同步

### 文件
- [ ] 更新 issue 狀態
- [ ] 記錄解決過程
- [ ] 更新相關文件

---

## 狀態更新記錄

| 日期 | 狀態 | 說明 |
|------|------|------|
| [日期] | 🔴 Open | 問題建立 |
| [日期] | 🟡 In Progress | 開始處理 |
| [日期] | 🟢 Resolved | 問題解決 |

---

## 備註

[其他需要記錄的資訊]

---

最後更新：[日期]
