# 頁面規格與設計

---

## 頁面架構總覽

```
┌─────────────────────────────────────┐
│  首次啟動設定精靈 (Setup Wizard)    │
│  （僅首次啟動時顯示）               │
│  - API Keys 設定                    │
│  - YouTube 授權                     │
└──────────────┬──────────────────────┘
               ↓
┌─────────────────────────────────────┐
│       主控台 (Dashboard)             │
│  （應用程式啟動後的首頁）           │
│  ┌──────────────────────────────┐   │
│  │  - 專案列表                  │   │
│  │  - 快速操作                  │   │
│  │  - 統計資訊                  │   │
│  └──────────────────────────────┘   │
└───┬─────────┬─────────┬─────────┬───┘
    │         │         │         │
    ↓         ↓         ↓         ↓
┌───────┐ ┌───────┐ ┌───────┐ ┌───────┐
│新增專│ │配置管│ │模板管│ │系統設│
│案頁  │ │理頁  │ │理頁  │ │定頁  │
└───┬───┘ └───────┘ └───────┘ └───────┘
    │
    ↓
┌───────────────────────────────────┐
│   影片生成配置頁 (Configure)      │
│  ┌────────────────────────────┐   │
│  │ 步驟 1: 上傳文字內容       │   │
│  │ 步驟 2: 視覺化配置         │   │
│  │ 步驟 3: Prompt & Model     │   │
│  │ 步驟 4: YouTube 設定       │   │
│  └────────────────────────────┘   │
└───────────────┬───────────────────┘
                ↓
┌───────────────────────────────────┐
│    進度監控頁 (Progress)          │
│  ┌────────────────────────────┐   │
│  │ 實時進度條                 │   │
│  │ 日誌顯示                   │   │
│  │ 錯誤處理                   │   │
│  └────────────────────────────┘   │
└───────────────┬───────────────────┘
                ↓
┌───────────────────────────────────┐
│    結果頁 (Result)                │
│  ┌────────────────────────────┐   │
│  │ 影片預覽                   │   │
│  │ YouTube 連結               │   │
│  │ 下載選項                   │   │
│  └────────────────────────────┘   │
└───────────────────────────────────┘
```

---

## 頁面詳細設計

---

### Page-1: 首次啟動設定精靈 (Setup Wizard)

**路由：** `/setup`

**權限要求：** 無（首次啟動時自動顯示）

**關聯 User Flow：** Flow-0（首次啟動設定流程）

---

#### 主要元件

**導航列：**
- Logo（左上角）
- 無其他導航元素

**主要內容區：**

**歡迎頁（Step 0）：**
- 標題：「歡迎使用 YTMaker」
- 說明文字：「這是一個本地端的 YouTube 影片自動化生產工具」
- 「開始設定」按鈕

**API 設定頁（Step 1-3）：**
- 步驟指示器：「步驟 1/4：API 設定」
- 分頁 Tab：
  - Gemini API（當前）
  - Stability AI
  - D-ID
- 每個 Tab 包含：
  - API 說明（用途、如何取得）
  - API Key 輸入框
  - 「測試連線」按鈕
  - 連線狀態顯示（未測試/測試中/成功/失敗）
- 「下一步」按鈕（需至少一個 API 測試成功）
- 「稍後設定」連結

**YouTube 授權頁（Step 4）：**
- 步驟指示器：「步驟 2/4：連結 YouTube 帳號」
- 說明文字：「連結您的 YouTube 頻道以自動上傳影片」
- 「連結 YouTube 帳號」按鈕（大型主要按鈕）
- 已連結狀態：
  - 頻道名稱
  - 頻道頭像
  - 「變更頻道」按鈕
- 「稍後設定」連結（提示：可稍後在設定頁面連結）

**完成頁（Step 5）：**
- 步驟指示器：「設定完成」
- 成功圖示（綠色勾選）
- 文字：「所有設定已完成，開始使用 YTMaker！」
- 設定摘要：
  - API Keys：已設定 3/3 ✓
  - YouTube：已連結 [頻道名稱] ✓
- 「進入主控台」按鈕

---

#### 表單欄位

**API 設定：**

| 欄位名稱 | 類型 | 必填 | 驗證規則 | 錯誤訊息 |
|---------|------|------|---------|---------|
| gemini_api_key | password | 是 | 長度 > 0 | 「請輸入 Gemini API Key」 |
| stability_api_key | password | 是 | 長度 > 0 | 「請輸入 Stability AI API Key」 |
| did_api_key | password | 是 | 長度 > 0 | 「請輸入 D-ID API Key」 |

**提交行為：**
- 點擊「測試連線」→ 調用對應 API 測試
- 測試成功 → 儲存 API Key 到本地配置檔案
- 測試失敗 → 顯示錯誤訊息，不儲存
- 點擊「下一步」→ 進入 YouTube 授權頁
- 點擊「稍後設定」→ 跳過當前步驟，部分功能可能無法使用

---

#### 頁面狀態

**載入中：**
- 測試連線時按鈕顯示 spinner
- 按鈕文字：「測試中...」

**錯誤狀態：**
- API Key 無效：紅色錯誤訊息
  - 「API Key 無效，請檢查」
  - 「連線失敗，請檢查網路」
- 顯示於輸入框下方

**成功狀態：**
- 綠色勾選圖示 + 「連線成功」
- 顯示於輸入框下方

---

#### 互動行為

**步驟導航：**
- 可點擊步驟指示器跳轉（已完成的步驟）
- 未完成的步驟呈灰色，不可點擊

**API Key 顯示/隱藏：**
- 輸入框類型為 password（隱藏）
- 眼睛圖示可切換顯示/隱藏

**Tab 切換：**
- 點擊 Tab 切換不同 API 設定
- 已設定的 Tab 顯示綠色勾選

---

#### 響應式設計

**桌面（≥1024px）：**
- 設定卡片寬度：700px
- 置中顯示

**平板（768-1023px）：**
- 設定卡片寬度：90%

**手機（<768px）：**
- 設定卡片寬度：100%
- 步驟指示器改為精簡模式（僅顯示當前步驟）

---

#### 頁面導航

**進入此頁面：**
- 首次啟動應用程式時自動顯示
- 系統檢測到配置檔案不存在時觸發

**離開此頁面：**
- 點擊「進入主控台」→ 主控台
- 點擊「稍後設定」（所有步驟）→ 主控台（顯示警告通知）

**離開確認：**
- 如有部分設定未完成，顯示 Modal：
  - 「部分設定未完成，確定要離開嗎？」
  - 「繼續設定」按鈕
  - 「稍後設定」按鈕

---

---

### Page-2: 主控台 (Dashboard)

**路由：** `/` 或 `/dashboard`

**權限要求：** 無（應用程式啟動後的首頁）

**關聯 User Flow：**
- Flow-1 步驟 1（開始新專案）
- Flow-2 步驟 1（選擇模板）
- Flow-5（批次處理）
- Flow-6（恢復專案）

---

#### 主要元件

**導航列：**
- Logo（左上角，可點擊回到主控台）
- 導航項目：
  - 主控台（當前頁面）
  - 配置管理
  - 模板管理
  - 設定（系統設定圖示）

**主要內容區：**

**統計卡片區（上方）：**
- 總影片數
- 本月生成數
- 已排程影片
- API 配額剩餘

**快速操作區（中間）：**
- 「新增專案」按鈕（主要 CTA，藍色大按鈕）
- 「使用模板生成」按鈕
- 「批次處理」按鈕
- 「恢復未完成專案」按鈕（僅當有未完成專案時顯示）

**專案列表區（下方）：**
- 表格顯示所有專案
- 欄位：
  - 專案名稱
  - 狀態（標籤顯示）
  - 創建時間
  - 最後更新時間
  - 操作按鈕
    - 「查看」
    - 「繼續」（僅未完成專案）
    - 「刪除」

---

#### 按鈕與操作

| 按鈕 | 點擊行為 |
|------|---------|
| 新增專案 | 跳轉到新增專案頁 |
| 使用模板生成 | 顯示模板選擇 Modal |
| 批次處理 | 跳轉到批次處理頁 |
| 恢復未完成專案 | 顯示未完成專案列表 Modal（僅當有未完成專案時顯示） |
| 查看 | 跳轉到結果頁（查看已完成專案） |
| 繼續 | 跳轉到進度監控頁（恢復執行） |
| 刪除 | 顯示確認 Modal，確認後刪除 |

---

#### 資料顯示

**資料來源：**
- 統計資料：`GET /api/stats`
- 專案列表：`GET /api/projects?limit=20&offset=0`

**顯示格式：**
- 表格（專案列表）
- 卡片（統計資訊）

**分頁規則：**
- 每頁 20 筆
- 底部顯示分頁器
- 支援跳轉頁數

**排序：**
- 預設：最後更新時間（降序）
- 可排序欄位：創建時間、最後更新時間
- 點擊欄位標題切換升序/降序

**篩選：**
- 狀態篩選（全部/進行中/已完成/失敗）
- 日期範圍篩選

---

#### 頁面狀態

**載入中：**
- 顯示骨架屏（Skeleton）
- 專案列表顯示 loading spinner

**空狀態：**
- 無專案時顯示：
  - 圖示（空資料夾）
  - 文字：「還沒有任何專案」
  - 「開始第一個專案」按鈕

**錯誤狀態：**
- API 失敗時顯示：
  - 錯誤圖示
  - 文字：「無法載入專案列表」
  - 「重新載入」按鈕

---

#### 互動行為

**滑鼠互動：**
- Hover 專案列時，背景變淺灰色
- Hover 操作按鈕時，按鈕顏色加深

**鍵盤互動：**
- Tab 鍵可遍歷所有按鈕
- Enter 鍵確認操作

---

#### 響應式設計

**桌面（≥1024px）：**
- 統計卡片：4 個橫排
- 專案列表：表格顯示

**平板（768-1023px）：**
- 統計卡片：2x2 網格
- 專案列表：表格顯示

**手機（<768px）：**
- 統計卡片：單列堆疊
- 專案列表：卡片顯示（非表格）
- 每個專案為一張卡片

---

#### 頁面導航

**進入此頁面：**
- 應用程式啟動後自動進入（若已完成首次設定）
- 點擊導航列 Logo
- 點擊導航列「主控台」

**離開此頁面：**
- 點擊「新增專案」→ 新增專案頁
- 點擊「配置管理」→ 配置管理頁
- 點擊「模板管理」→ 模板管理頁
- 點擊「設定」→ 設定頁
- 點擊專案的「查看」→ 結果頁
- 點擊專案的「繼續」→ 進度監控頁

---

---

### Page-3: 新增專案頁 (New Project)

**路由：** `/project/new`

**權限要求：** 無

**關聯 User Flow：**
- Flow-1 步驟 1-2（基本影片生成）
- Flow-2 步驟 2-3（使用模板）
- Flow-4 步驟 1（排程發布）

---

#### 主要元件

**導航列：**
- 同 Dashboard

**麵包屑：**
- 主控台 > 新增專案

**主要內容區：**

**步驟指示器（頂部）：**
- 步驟 1: 上傳文字內容（當前）
- 步驟 2: 視覺化配置
- 步驟 3: Prompt & Model
- 步驟 4: YouTube 設定

**步驟 1: 上傳文字內容**

**表單區域：**
- 專案名稱輸入框
- 文字內容輸入方式選擇：
  - 上傳檔案（TXT/MD）
  - 直接貼上文字
- 文字編輯器（支援 Markdown）
- 字數統計（即時顯示）
- 驗證提示（500-10000 字）

**操作按鈕：**
- 「取消」（返回主控台）
- 「下一步」（進入步驟 2）

---

#### 表單欄位

| 欄位名稱 | 類型 | 必填 | 驗證規則 | 錯誤訊息 | 預設值 |
|---------|------|------|---------|---------|-------|
| project_name | text | 是 | 長度 1-100 字元 | 「專案名稱不能為空」 | 無 |
| content_source | radio | 是 | 'upload' 或 'paste' | - | 'paste' |
| content_file | file | 條件必填 | .txt, .md, 500-10000 字 | 「檔案必須為 TXT 或 MD 格式」 | 無 |
| content_text | textarea | 條件必填 | 500-10000 字 | 「文字長度必須在 500-10000 字之間」 | 無 |

**提交行為：**
- 驗證通過 → 儲存專案（狀態：INITIALIZED）
- 進入步驟 2

---

#### 頁面狀態

**載入中：**
- 上傳檔案時顯示進度條
- 「下一步」按鈕顯示 spinner

**錯誤狀態：**
- 檔案格式錯誤：紅色提示於檔案上傳區
- 字數不符：紅色提示於字數統計下方
- 顯示具體錯誤訊息

**成功狀態：**
- 字數驗證通過：綠色勾選圖示
- 文字：「內容符合要求，可進入下一步」

---

#### 互動行為

**滑鼠互動：**
- 拖放檔案到上傳區
- Hover 上傳區時顯示藍色邊框

**鍵盤互動：**
- Tab 鍵遍歷輸入框
- Ctrl+V 貼上文字

**即時驗證：**
- 輸入文字時即時更新字數
- 字數不符時即時顯示提示（黃色警告）

---

#### 響應式設計

**桌面（≥1024px）：**
- 內容區寬度：800px
- 置中顯示

**平板（768-1023px）：**
- 內容區寬度：90%

**手機（<768px）：**
- 內容區寬度：100%
- 文字編輯器高度：300px

---

#### 頁面導航

**進入此頁面：**
- 從主控台點擊「新增專案」

**離開此頁面：**
- 點擊「取消」→ 返回主控台（顯示確認 Modal）
- 點擊「下一步」→ 進入步驟 2（視覺化配置頁）

**離開確認：**
- 如果有未儲存的內容，顯示 Modal：
  - 「您有未儲存的內容，確定要離開嗎?」
  - 「保存草稿」按鈕
  - 「放棄」按鈕
  - 「取消」按鈕

---

---

### Page-4: 視覺化配置頁 (Visual Configuration)

**路由：** `/project/:id/configure/visual`

**權限要求：** 無

**關聯 User Flow：**
- Flow-1 步驟 2（配置視覺元素）
- Flow-3 步驟 1-7（視覺化界面配置）
- Flow-7 步驟 1-4（段落級配置）

---

#### 主要元件

**導航列：**
- 同 Dashboard

**麵包屑：**
- 主控台 > 新增專案 > 視覺化配置

**步驟指示器：**
- 步驟 1: 上傳文字內容 ✓
- 步驟 2: 視覺化配置（當前）
- 步驟 3: Prompt & Model
- 步驟 4: YouTube 設定

**主要內容區（分左右兩欄）：**

**左側：預覽區（60%寬）**
- 模擬影片畫面（16:9 比例）
- 顯示所有配置效果：
  - 字幕位置和樣式
  - Logo 位置和大小
  - 標題文字
  - 疊加元素
- 即時更新預覽

**右側：配置面板（40%寬）**

**全局配置 Tab：**
- 字幕配置
  - 字型選擇（下拉選單）
  - 字體大小（滑桿，20-100）
  - 顏色選擇器
  - 位置（拖拽定位或預設位置）
  - 邊框（開關 + 顏色 + 寬度）
  - 陰影（開關 + 顏色 + 偏移）
  - 背景框（開關 + 顏色 + 透明度）

- Logo 配置
  - 上傳 Logo 圖片
  - 拖拽定位（在預覽區）
  - 大小調整（滑桿，10-200px）
  - 透明度（滑桿，0-100%）

- 標題/疊加元素
  - 新增文字疊加（按鈕）
  - 新增圖片疊加（按鈕）
  - 新增形狀（按鈕）
  - 元素列表（可編輯、刪除、調整順序）

**段落級配置 Tab：**
- 段落選擇器（下拉選單，顯示段落編號）
- 勾選「覆寫全局配置」
- 顯示與全局配置相同的配置選項
- 僅對選擇的段落生效

**模板管理：**
- 「載入模板」按鈕
- 「儲存為模板」按鈕

**底部操作按鈕：**
- 「上一步」（返回步驟 1）
- 「儲存配置」（儲存但不進入下一步）
- 「下一步」（進入步驟 3）

---

#### 表單欄位

**字幕配置：**

| 欄位名稱 | 類型 | 必填 | 驗證規則 | 預設值 |
|---------|------|------|---------|-------|
| font_family | select | 是 | 預設字型列表 | "Noto Sans TC" |
| font_size | slider | 是 | 20-100 | 48 |
| font_color | color | 是 | hex 格式 | "#FFFFFF" |
| position | xy 座標 | 是 | 在畫面內 | bottom-center |
| border_enabled | checkbox | 否 | - | false |
| border_color | color | 條件必填 | hex 格式 | "#000000" |
| border_width | slider | 條件必填 | 1-10 | 2 |
| shadow_enabled | checkbox | 否 | - | true |
| shadow_color | color | 條件必填 | hex 格式 | "#000000" |
| shadow_offset_x | slider | 條件必填 | -20 to 20 | 2 |
| shadow_offset_y | slider | 條件必填 | -20 to 20 | 2 |
| background_enabled | checkbox | 否 | - | false |
| background_color | color | 條件必填 | hex 格式 | "#000000" |
| background_opacity | slider | 條件必填 | 0-100 | 70 |

**Logo 配置：**

| 欄位名稱 | 類型 | 必填 | 驗證規則 | 預設值 |
|---------|------|------|---------|-------|
| logo_file | file | 否 | .png, .jpg, .svg | 無 |
| logo_x | number | 條件必填 | 0-1920 | 50 |
| logo_y | number | 條件必填 | 0-1080 | 50 |
| logo_size | slider | 條件必填 | 10-200 | 100 |
| logo_opacity | slider | 條件必填 | 0-100 | 100 |

**提交行為：**
- 驗證所有欄位
- 儲存配置到資料庫
- 進入步驟 3

---

#### 頁面狀態

**載入中：**
- 首次進入時載入預設配置
- 顯示 loading spinner

**錯誤狀態：**
- 配置參數超出範圍：紅色提示
- Logo 上傳失敗：顯示錯誤訊息

**成功狀態：**
- 配置儲存成功：綠色 toast 通知

---

#### 互動行為

**拖拽定位：**
- 在預覽區拖拽字幕、Logo、疊加元素
- 顯示對齊輔助線（水平/垂直中線）
- 即時更新座標值

**即時預覽：**
- 所有配置變更即時反映在預覽區
- 延遲 < 100ms

**元素管理：**
- 點擊預覽區元素選中
- 選中後右側面板顯示該元素配置
- 刪除鍵可刪除選中元素

---

#### 響應式設計

**桌面（≥1024px）：**
- 左右分欄（60% / 40%）
- 預覽區完整顯示

**平板（768-1023px）：**
- 左右分欄（50% / 50%）
- 配置面板可摺疊

**手機（<768px）：**
- 上下堆疊
- 預覽區在上（固定高度 300px）
- 配置面板在下（可捲動）
- 拖拽功能改為數值輸入

---

#### 頁面導航

**進入此頁面：**
- 從步驟 1 點擊「下一步」
- 從主控台點擊專案的「編輯配置」

**離開此頁面：**
- 點擊「上一步」→ 返回步驟 1
- 點擊「儲存配置」→ 留在當前頁面
- 點擊「下一步」→ 進入步驟 3

**離開確認：**
- 如有未儲存的配置，顯示確認 Modal

---

---

### Page-5: Prompt 與模型設定頁 (Prompt & Model Settings)

**路由：** `/project/:id/configure/prompt-model`

**權限要求：** 無

**關聯 User Flow：**
- Flow-1 步驟 4-5（選擇 Prompt 範本和 Gemini 模型）
- Flow-8 步驟 1-6（Prompt 範本管理）

---

#### 主要元件

**導航列：**
- 同 Dashboard

**麵包屑：**
- 主控台 > 新增專案 > Prompt & Model

**步驟指示器：**
- 步驟 1: 上傳文字內容 ✓
- 步驟 2: 視覺化配置 ✓
- 步驟 3: Prompt & Model（當前）
- 步驟 4: YouTube 設定

**主要內容區：**

**Prompt 範本區（上半部）：**

**範本選擇：**
- 下拉選單：選擇現有範本
  - 預設範本
  - 自訂範本 1
  - 自訂範本 2
  - ...
- 「新增範本」按鈕
- 「編輯當前範本」按鈕
- 「刪除範本」按鈕（不可刪除預設範本）

**Prompt 編輯器：**
- 大型文字編輯區（Textarea）
- 顯示當前 Prompt 內容
- 支援多行編輯
- 字數統計（建議 200-1000 字）
- 語法高亮（Markdown 風格）

**Prompt 說明：**
- 提示文字：
  - 「Prompt 用於指導 AI 生成腳本，建議包含段落時長要求（5-20 秒）」
- 範例 Prompt 連結（點擊顯示 Modal）

**Gemini 模型選擇區（下半部）：**

**模型選項：**
- 單選按鈕（Radio buttons）
  - `gemini-1.5-pro`
    - 說明：高品質、適合複雜內容、成本較高
    - 圖示：⭐⭐⭐（品質）、⏱️（較慢）、💰💰（成本）
  - `gemini-1.5-flash`
    - 說明：快速生成、適合大量生產、成本較低
    - 圖示：⭐⭐（品質）、⚡（快速）、💰（成本）

**模型對比表格：**

| 特性 | gemini-1.5-pro | gemini-1.5-flash |
|------|---------------|-----------------|
| 品質 | ⭐⭐⭐ | ⭐⭐ |
| 速度 | 中等 | 快速 |
| 成本 | 較高 | 較低 |
| 適合場景 | 高品質內容 | 大量生產 |

**底部操作按鈕：**
- 「上一步」（返回步驟 2）
- 「儲存設定」（儲存但不進入下一步）
- 「下一步」（進入步驟 4）

---

#### 表單欄位

| 欄位名稱 | 類型 | 必填 | 驗證規則 | 預設值 |
|---------|------|------|---------|-------|
| prompt_template_id | select | 是 | 範本 ID | "default" |
| prompt_content | textarea | 是 | 200-1000 字 | 預設 Prompt |
| gemini_model | radio | 是 | 'gemini-1.5-pro' 或 'gemini-1.5-flash' | 'gemini-1.5-flash' |

**提交行為：**
- 驗證 Prompt 長度
- 儲存 Prompt 和模型選擇
- 進入步驟 4

---

#### 按鈕與操作

| 按鈕 | 點擊行為 |
|------|---------|
| 選擇範本（下拉選單） | 載入範本內容到編輯器 |
| 新增範本 | 顯示「新增範本」Modal，輸入範本名稱和內容 |
| 編輯當前範本 | 允許修改範本內容（若為預設範本，提示「將儲存為新範本」） |
| 刪除範本 | 顯示確認 Modal，確認後刪除（預設範本不可刪除） |
| 範例 Prompt 連結 | 顯示 Modal，展示範例 Prompt |
| 上一步 | 返回步驟 2 |
| 儲存設定 | 儲存當前 Prompt 和模型選擇，留在當前頁面 |
| 下一步 | 儲存並進入步驟 4 |

---

#### 頁面狀態

**載入中：**
- 首次進入時載入預設 Prompt 和模型
- 顯示 loading spinner

**錯誤狀態：**
- Prompt 長度不符：紅色提示
- 範本儲存失敗：顯示錯誤訊息

**成功狀態：**
- 設定儲存成功：綠色 toast 通知

---

#### 互動行為

**即時字數統計：**
- 輸入時即時更新字數
- 字數不符時顯示黃色警告

**Prompt 驗證：**
- 建議包含「段落時長」相關字詞
- 若未包含，顯示警告（可忽略）

---

#### 響應式設計

**桌面（≥1024px）：**
- Prompt 編輯器高度：400px
- 模型選項橫排顯示

**平板（768-1023px）：**
- Prompt 編輯器高度：350px
- 模型選項橫排顯示

**手機（<768px）：**
- Prompt 編輯器高度：300px
- 模型選項縱向堆疊

---

#### 頁面導航

**進入此頁面：**
- 從步驟 2 點擊「下一步」

**離開此頁面：**
- 點擊「上一步」→ 返回步驟 2
- 點擊「儲存設定」→ 留在當前頁面
- 點擊「下一步」→ 進入步驟 4

---

---

### Page-6: YouTube 設定頁 (YouTube Settings)

**路由：** `/project/:id/configure/youtube`

**權限要求：** 無

**關聯 User Flow：**
- Flow-1 步驟 10（YouTube 上傳設定）
- Flow-4 步驟 1-3（排程發布）

---

#### 主要元件

**導航列：**
- 同 Dashboard

**麵包屑：**
- 主控台 > 新增專案 > YouTube 設定

**步驟指示器：**
- 步驟 1: 上傳文字內容 ✓
- 步驟 2: 視覺化配置 ✓
- 步驟 3: Prompt & Model ✓
- 步驟 4: YouTube 設定（當前）

**主要內容區：**

**YouTube 帳號連結區（頂部）：**
- 顯示當前連結的 YouTube 頻道名稱和頭像
- 「變更頻道」按鈕（重新授權）

**影片資訊區：**

**自動生成提示：**
- 提示文字：「影片標題、描述、標籤將由 AI 自動生成，您也可以在此手動調整」

**表單欄位：**
- 影片標題（自動填入 AI 生成的標題，可編輯）
- 影片描述（自動填入 AI 生成的描述，可編輯）
- 標籤（自動填入 AI 生成的標籤，可編輯）
  - 顯示為標籤列表（可新增、刪除）
- 隱私設定（單選）
  - 公開
  - 不公開
  - 私人
- 發布方式（單選）
  - 立即發布
  - 排程發布（顯示日期時間選擇器）

**排程發布設定（條件顯示）：**
- 日期選擇器
- 時間選擇器
- 時區顯示（自動偵測）
- 驗證：必須為未來時間

**AI 生成內容標註：**
- 勾選框：「此影片包含 AI 生成的內容」（預設勾選，不可取消）
- 說明文字：「根據 YouTube 政策，AI 生成的影片必須標註」

**底部操作按鈕：**
- 「上一步」（返回步驟 3）
- 「儲存草稿」（儲存專案但不開始生成）
- 「開始生成」（儲存設定並開始生成流程，跳轉到進度監控頁）

---

#### 表單欄位

| 欄位名稱 | 類型 | 必填 | 驗證規則 | 預設值 | 錯誤訊息 |
|---------|------|------|---------|-------|---------|
| youtube_title | text | 是 | 長度 1-100 字元 | AI 生成 | 「標題不能為空」 |
| youtube_description | textarea | 是 | 長度 1-5000 字元 | AI 生成 | 「描述不能為空」 |
| youtube_tags | tags | 否 | 最多 30 個標籤 | AI 生成 | - |
| privacy | radio | 是 | 'public', 'unlisted', 'private' | 'public' | - |
| publish_type | radio | 是 | 'immediate', 'scheduled' | 'immediate' | - |
| scheduled_date | date | 條件必填 | 未來日期 | 無 | 「排程日期必須為未來時間」 |
| scheduled_time | time | 條件必填 | 未來時間 | 無 | 「排程時間必須為未來時間」 |
| ai_content_flag | checkbox | 是 | 必須勾選 | true | - |

**提交行為：**
- 驗證所有欄位
- 儲存 YouTube 設定
- 開始生成流程（狀態：SCRIPT_GENERATING）
- 跳轉到進度監控頁

---

#### 按鈕與操作

| 按鈕 | 點擊行為 |
|------|---------|
| 變更頻道 | 顯示 YouTube OAuth 授權視窗 |
| 上一步 | 返回步驟 3 |
| 儲存草稿 | 儲存所有設定，不開始生成，返回主控台 |
| 開始生成 | 儲存設定，開始生成流程，跳轉到進度監控頁 |

---

#### 頁面狀態

**載入中：**
- 首次進入時載入 AI 生成的 metadata
- 顯示 loading spinner

**錯誤狀態：**
- YouTube 帳號未連結：紅色警告框
  - 「請先連結 YouTube 帳號」
  - 「連結帳號」按鈕
- 欄位驗證失敗：紅色提示於欄位下方

**成功狀態：**
- 設定儲存成功：綠色 toast 通知
- 開始生成：跳轉到進度監控頁

---

#### 互動行為

**標籤輸入：**
- 輸入後按 Enter 新增標籤
- 點擊標籤上的 X 刪除
- 最多 30 個標籤

**排程發布：**
- 選擇「排程發布」後顯示日期時間選擇器
- 選擇「立即發布」後隱藏日期時間選擇器

**即時驗證：**
- 排程時間必須為未來時間（即時驗證）

---

#### 響應式設計

**桌面（≥1024px）：**
- 表單寬度：700px
- 置中顯示

**平板（768-1023px）：**
- 表單寬度：90%

**手機（<768px）：**
- 表單寬度：100%
- 日期時間選擇器改為行動裝置友善的 picker

---

#### 頁面導航

**進入此頁面：**
- 從步驟 3 點擊「下一步」

**離開此頁面：**
- 點擊「上一步」→ 返回步驟 3
- 點擊「儲存草稿」→ 返回主控台
- 點擊「開始生成」→ 進度監控頁

**離開確認：**
- 如有未儲存的設定，顯示確認 Modal

---

---

### Page-7: 進度監控頁 (Progress Monitoring)

**路由：** `/project/:id/progress`

**權限要求：** 無

**關聯 User Flow：**
- Flow-1 步驟 4-10（監控生成進度）
- Flow-6 步驟 1-3（恢復執行）

---

#### 主要元件

**導航列：**
- 同 Dashboard

**麵包屑：**
- 主控台 > [專案名稱] > 生成進度

**主要內容區：**

**總進度區（頂部）：**
- 大型進度條（0-100%）
- 當前階段文字（例如：「腳本生成中...」）
- 預估剩餘時間（例如：「預估剩餘 15 分鐘」）

**階段進度區（中間）：**

**階段列表（縱向排列）：**
每個階段顯示：
- 階段圖示（✓ 已完成 / ⏳ 進行中 / ⏸️ 等待中）
- 階段名稱
- 階段狀態
- 子任務進度（若適用）

**階段列表：**
1. 腳本生成
   - 狀態：已完成 / 進行中 / 等待中 / 失敗
   - 子任務：無
2. 素材生成
   - 狀態：已完成 / 進行中 / 等待中 / 失敗
   - 子任務：
     - 語音合成（✓）
     - 圖片生成（15/15）
     - 虛擬主播生成（⏳）
3. 影片渲染
   - 狀態：已完成 / 進行中 / 等待中 / 失敗
   - 子任務：無
4. 封面生成
   - 狀態：已完成 / 進行中 / 等待中 / 失敗
   - 子任務：無
5. YouTube 上傳
   - 狀態：已完成 / 進行中 / 等待中 / 失敗
   - 子任務：無

**日誌顯示區（底部，可摺疊）：**
- 即時日誌輸出（類似終端機）
- 顯示每個步驟的詳細訊息
- 錯誤訊息以紅色顯示
- 警告訊息以黃色顯示
- 自動捲動到最新訊息
- 「清空日誌」按鈕
- 「下載日誌」按鈕

**底部操作按鈕：**
- 「暫停」（暫停生成流程）
- 「取消」（取消生成流程，顯示確認 Modal）
- 「返回主控台」（生成完成後顯示）

---

#### 資料顯示

**資料來源：**
- WebSocket 連線：`ws://api/projects/:id/progress`
- 即時接收進度更新

**更新頻率：**
- 每 1 秒更新一次進度
- 階段變更時立即更新

**預估時間計算：**
- 基於歷史平均時間
- 動態調整（根據當前進度）

---

#### 頁面狀態

**進行中：**
- 進度條動畫
- 當前階段圖示旋轉
- 日誌持續更新

**暫停：**
- 進度條停止
- 顯示「已暫停」狀態
- 「繼續」按鈕取代「暫停」按鈕

**完成：**
- 進度條 100%
- 顯示綠色勾選圖示
- 文字：「影片生成完成！」
- 顯示「查看結果」按鈕
- 顯示「返回主控台」按鈕

**失敗：**
- 進度條停止
- 顯示紅色錯誤圖示
- 文字：「生成失敗」
- 顯示錯誤訊息
- 顯示「查看錯誤日誌」按鈕
- 顯示「重試」按鈕
- 顯示「返回主控台」按鈕

---

#### 錯誤處理

**錯誤類型顯示：**
- API 錯誤：顯示 API 名稱和錯誤碼
- 檔案系統錯誤：顯示檔案路徑和錯誤原因
- 網路錯誤：顯示連線狀態和重試次數

**錯誤訊息範例：**
```
[ERROR] Gemini API 錯誤：API 金鑰無效
[ERROR] 圖片生成失敗（圖片 #7）：連線超時，已重試 3 次
[WARNING] 虛擬主播生成時長不符（預期 30 秒，實際 32 秒）
```

**錯誤操作：**
- 點擊「查看錯誤日誌」→ 展開日誌區，捲動到錯誤位置
- 點擊「重試」→ 從失敗點繼續（使用斷點續傳）

---

#### 互動行為

**即時更新：**
- WebSocket 接收訊息後即時更新 UI
- 無需手動刷新

**日誌捲動：**
- 新訊息出現時自動捲動到底部
- 用戶手動捲動後停止自動捲動
- 捲動到底部後恢復自動捲動

---

#### 響應式設計

**桌面（≥1024px）：**
- 階段列表橫向排列（流程圖風格）
- 日誌區高度：300px

**平板（768-1023px）：**
- 階段列表縱向排列
- 日誌區高度：250px

**手機（<768px）：**
- 階段列表縱向排列
- 日誌區預設摺疊
- 日誌區高度：200px

---

#### 頁面導航

**進入此頁面：**
- 從 YouTube 設定頁點擊「開始生成」
- 從主控台點擊專案的「繼續」（恢復執行）

**離開此頁面：**
- 生成完成後點擊「查看結果」→ 結果頁
- 點擊「返回主控台」→ 主控台
- 點擊「取消」→ 顯示確認 Modal，確認後返回主控台

**離開確認：**
- 生成進行中時離開，顯示 Modal：
  - 「生成進行中，確定要離開嗎？生成將在背景繼續執行。」
  - 「確定」按鈕
  - 「取消」按鈕

---

---

### Page-8: 結果頁 (Result)

**路由：** `/project/:id/result`

**權限要求：** 無

**關聯 User Flow：**
- Flow-1 步驟 10（查看生成結果）

---

#### 主要元件

**導航列：**
- 同 Dashboard

**麵包屑：**
- 主控台 > [專案名稱] > 結果

**主要內容區：**

**成功訊息區（頂部）：**
- 大型綠色勾選圖示
- 文字：「影片已成功生成並上傳到 YouTube！」
- YouTube 影片連結（可點擊，新視窗開啟）
- 影片狀態標籤（公開 / 不公開 / 私人 / 已排程）

**影片預覽區（中間）：**
- 內嵌 YouTube 播放器（16:9）
- 若影片為私人，顯示本地影片播放器（播放 final_video.mp4）

**影片資訊區：**
- 標題
- 描述
- 標籤
- 發布時間（若已發布）
- 排程時間（若為排程發布）

**下載區：**
- 「下載影片」按鈕（下載 final_video.mp4）
- 「下載封面」按鈕（下載 thumbnail.jpg）
- 「下載所有素材」按鈕（ZIP 檔案，包含所有中間素材）

**操作區：**
- 「編輯 YouTube 資訊」按鈕（跳轉到 YouTube Studio）
- 「生成新影片」按鈕（返回新增專案頁）
- 「返回主控台」按鈕

---

#### 資料顯示

**資料來源：**
- `GET /api/projects/:id/result`

**顯示內容：**
- YouTube 影片 ID
- YouTube 連結
- 影片資訊（標題、描述、標籤）
- 發布狀態
- 本地檔案路徑（供下載）

---

#### 按鈕與操作

| 按鈕 | 點擊行為 |
|------|---------|
| YouTube 影片連結 | 新視窗開啟 YouTube 影片 |
| 下載影片 | 下載 final_video.mp4 |
| 下載封面 | 下載 thumbnail.jpg |
| 下載所有素材 | 下載 ZIP 檔案（包含所有素材） |
| 編輯 YouTube 資訊 | 新視窗開啟 YouTube Studio 編輯頁面 |
| 生成新影片 | 跳轉到新增專案頁 |
| 返回主控台 | 跳轉到主控台 |

---

#### 頁面狀態

**載入中：**
- 首次進入時載入專案結果
- 顯示 loading spinner

**錯誤狀態：**
- 專案未完成：顯示錯誤訊息
  - 「專案尚未完成，無法查看結果」
  - 「返回主控台」按鈕
- 找不到專案：顯示 404 錯誤

**成功狀態：**
- 顯示完整結果

---

#### 互動行為

**影片播放：**
- 點擊播放器播放影片
- 支援全螢幕

**下載：**
- 點擊下載按鈕後開始下載
- 顯示下載進度（若檔案較大）

---

#### 響應式設計

**桌面（≥1024px）：**
- 影片播放器寬度：800px
- 置中顯示

**平板（768-1023px）：**
- 影片播放器寬度：90%

**手機（<768px）：**
- 影片播放器寬度：100%
- 按鈕縱向堆疊

---

#### 頁面導航

**進入此頁面：**
- 從進度監控頁點擊「查看結果」
- 從主控台點擊專案的「查看」

**離開此頁面：**
- 點擊「生成新影片」→ 新增專案頁
- 點擊「返回主控台」→ 主控台

---

---

### Page-9: 配置管理頁 (Configuration Management)

**路由：** `/configurations`

**權限要求：** 無

**關聯 User Flow：**
- Flow-3 步驟 8（儲存配置為模板）

---

#### 主要元件

**導航列：**
- 同 Dashboard（「配置管理」為當前頁面）

**主要內容區：**

**頁面標題：**
- 「配置管理」

**配置列表：**
- 表格顯示所有配置
- 欄位：
  - 配置名稱
  - 創建時間
  - 最後使用時間
  - 使用次數
  - 操作按鈕
    - 「預覽」
    - 「編輯」
    - 「複製」
    - 「刪除」

**操作按鈕（頂部）：**
- 「新增配置」按鈕

---

#### 資料顯示

**資料來源：**
- `GET /api/configurations`

**顯示格式：**
- 表格

**分頁規則：**
- 每頁 20 筆
- 底部分頁器

**排序：**
- 預設：最後使用時間（降序）
- 可排序欄位：創建時間、最後使用時間、使用次數

---

#### 按鈕與操作

| 按鈕 | 點擊行為 |
|------|---------|
| 新增配置 | 跳轉到視覺化配置頁（新配置） |
| 預覽 | 顯示 Modal，預覽配置效果 |
| 編輯 | 跳轉到視覺化配置頁（編輯模式） |
| 複製 | 複製配置並跳轉到視覺化配置頁（編輯模式） |
| 刪除 | 顯示確認 Modal，確認後刪除 |

---

#### 頁面狀態

**載入中：**
- 顯示骨架屏

**空狀態：**
- 無配置時顯示：
  - 圖示（空資料夾）
  - 文字：「還沒有任何配置」
  - 「新增第一個配置」按鈕

**錯誤狀態：**
- API 失敗時顯示錯誤訊息

---

#### 響應式設計

**桌面（≥1024px）：**
- 表格顯示

**平板（768-1023px）：**
- 表格顯示

**手機（<768px）：**
- 卡片顯示

---

#### 頁面導航

**進入此頁面：**
- 點擊導航列「配置管理」

**離開此頁面：**
- 點擊其他導航項目

---

---

### Page-10: 模板管理頁 (Template Management)

**路由：** `/templates`

**權限要求：** 無

**關聯 User Flow：**
- Flow-2 步驟 1-2（使用模板生成）
- Flow-8 步驟 1-5（Prompt 範本管理）

---

#### 主要元件

**導航列：**
- 同 Dashboard（「模板管理」為當前頁面）

**主要內容區：**

**頁面標題：**
- 「模板管理」

**Tab 切換：**
- 「視覺配置模板」
- 「Prompt 範本」

---

#### Tab 1: 視覺配置模板

**模板列表：**
- 卡片顯示（網格佈局）
- 每張卡片包含：
  - 模板預覽圖（縮圖）
  - 模板名稱
  - 描述
  - 創建時間
  - 使用次數
  - 操作按鈕
    - 「使用」
    - 「編輯」
    - 「刪除」

**操作按鈕（頂部）：**
- 「新增模板」按鈕

---

#### Tab 2: Prompt 範本

**範本列表：**
- 列表顯示
- 每個範本包含：
  - 範本名稱
  - Prompt 預覽（前 100 字）
  - 創建時間
  - 使用次數
  - 操作按鈕
    - 「查看」
    - 「編輯」
    - 「複製」
    - 「刪除」（預設範本不可刪除）

**操作按鈕（頂部）：**
- 「新增範本」按鈕

---

#### 按鈕與操作

**視覺配置模板：**

| 按鈕 | 點擊行為 |
|------|---------|
| 新增模板 | 跳轉到視覺化配置頁（新模板） |
| 使用 | 跳轉到新增專案頁，自動載入此模板 |
| 編輯 | 跳轉到視覺化配置頁（編輯模式） |
| 刪除 | 顯示確認 Modal，確認後刪除 |

**Prompt 範本：**

| 按鈕 | 點擊行為 |
|------|---------|
| 新增範本 | 顯示「新增 Prompt 範本」Modal |
| 查看 | 顯示 Modal，顯示完整 Prompt 內容 |
| 編輯 | 顯示「編輯 Prompt 範本」Modal |
| 複製 | 複製範本並顯示「編輯 Prompt 範本」Modal |
| 刪除 | 顯示確認 Modal，確認後刪除（預設範本不可刪除） |

---

#### 頁面狀態

**載入中：**
- 顯示骨架屏

**空狀態：**
- 無模板時顯示：
  - 圖示（空資料夾）
  - 文字：「還沒有任何模板」
  - 「新增第一個模板」按鈕

**錯誤狀態：**
- API 失敗時顯示錯誤訊息

---

#### 響應式設計

**桌面（≥1024px）：**
- 視覺配置模板：3 欄網格
- Prompt 範本：列表顯示

**平板（768-1023px）：**
- 視覺配置模板：2 欄網格
- Prompt 範本：列表顯示

**手機（<768px）：**
- 視覺配置模板：單欄網格
- Prompt 範本：卡片顯示

---

#### 頁面導航

**進入此頁面：**
- 點擊導航列「模板管理」

**離開此頁面：**
- 點擊其他導航項目

---

---

### Page-11: 系統設定頁 (System Settings)

**路由：** `/settings`

**權限要求：** 無

**關聯 User Flow：**
- Flow-0 步驟 2-4（首次啟動設定，可在此頁面重新設定）
- Flow-9 步驟 1-6（系統設定管理）

---

#### 主要元件

**導航列：**
- 同 Dashboard（「設定」為當前頁面）

**主要內容區：**

**頁面標題：**
- 「系統設定」

**Tab 切換：**
- 「API 金鑰」
- 「YouTube 授權」
- 「偏好設定」

---

#### Tab 1: API 金鑰

**API 金鑰列表：**

| API 服務 | 狀態 | 最後測試時間 | 操作 |
|---------|------|-------------|------|
| Google Gemini API | ✓ 已設定 / ✗ 未設定 | 2024-01-15 14:30 | 「編輯」「測試連線」「刪除」 |
| Stability AI API | ✓ 已設定 / ✗ 未設定 | 2024-01-15 14:32 | 「編輯」「測試連線」「刪除」 |
| D-ID API | ✓ 已設定 / ✗ 未設定 | 2024-01-15 14:35 | 「編輯」「測試連線」「刪除」 |

**API 配額顯示：**
- D-ID：剩餘 60 分鐘 / 90 分鐘（每月重置）
- YouTube：剩餘 8,000 units / 10,000 units（每日重置）
- 進度條顯示使用情況
- 配額不足時顯示警告（黃色或紅色）

**編輯 API Key Modal：**
- API 名稱（標題）
- API Key 輸入框（password 類型）
- 「顯示/隱藏」切換
- 「測試連線」按鈕
- 「儲存」按鈕
- 「取消」按鈕

---

#### Tab 2: YouTube 授權

**YouTube 帳號列表：**

**已連結帳號：**
- 帳號卡片（每個連結的帳號一張卡片）
  - 頻道名稱
  - 頻道頭像
  - 頻道訂閱數（從 API 取得）
  - 授權狀態（✓ 已授權 / ✗ 授權過期）
  - 授權時間
  - 操作按鈕：
    - 「重新授權」（若授權過期）
    - 「移除授權」（紅色按鈕）

**新增帳號：**
- 「連結新的 YouTube 帳號」按鈕（大型主要按鈕）
- 點擊後顯示 Google OAuth 授權視窗
- 支援連結多個 YouTube 帳號

**說明文字：**
- 「您可以連結多個 YouTube 帳號，在生成影片時選擇要上傳的頻道」

---

#### Tab 3: 偏好設定

**一般設定：**
- 預設語音性別（單選）
  - 男聲
  - 女聲
- 預設語速（滑桿，0.5x - 2x）
- 預設隱私設定（下拉選單）
  - 公開
  - 不公開
  - 私人

**檔案管理：**
- 專案檔案保留時間（下拉選單）
  - 永久保留
  - 30 天後刪除
  - 7 天後刪除
- 是否保留中間素材（勾選框）
  - 勾選：保留所有素材（圖片、音訊、片段等）
  - 不勾選：僅保留最終影片和封面

**通知設定：**
- 影片生成完成時顯示系統通知（勾選框）
- 發生錯誤時顯示通知（勾選框）

**資料管理：**
- 「清除所有快取」按鈕
- 「匯出所有專案資料」按鈕（匯出為 JSON）
- 「匯入專案資料」按鈕（從 JSON 匯入）

**危險區域（紅色框）：**
- 「重置所有設定」按鈕（重置為預設值）
  - 點擊後顯示確認 Modal
- 「清除所有專案資料」按鈕（刪除所有專案和檔案）
  - 點擊後顯示確認 Modal，需要輸入確認文字

**底部操作：**
- 「儲存變更」按鈕

---

#### 按鈕與操作

| 按鈕 | 點擊行為 |
|------|---------|
| 編輯（API 金鑰） | 顯示「編輯 API Key」Modal |
| 測試連線 | 調用對應 API 測試連線，顯示成功/失敗訊息 |
| 刪除（API 金鑰） | 顯示確認 Modal，確認後刪除 API Key |
| 連結新的 YouTube 帳號 | 開啟 Google OAuth 授權流程 |
| 重新授權（YouTube） | 重新進行 OAuth 授權 |
| 移除授權（YouTube） | 顯示確認 Modal，確認後移除授權 |
| 清除所有快取 | 顯示確認 Modal，確認後清除快取檔案 |
| 匯出所有專案資料 | 生成 JSON 檔案並下載 |
| 匯入專案資料 | 顯示檔案選擇器，上傳 JSON 檔案 |
| 重置所有設定 | 顯示確認 Modal，確認後重置所有設定為預設值 |
| 清除所有專案資料 | 顯示確認 Modal（需輸入確認文字），確認後刪除所有資料 |
| 儲存變更（偏好設定） | 儲存偏好設定到本地配置檔 |

---

#### Modal 設計

**編輯 API Key Modal：**
```
標題：編輯 Gemini API Key

[說明文字：請輸入您的 Google Gemini API Key]
[如何取得 API Key 連結]

API Key: [____________] [顯示/隱藏圖示]

連線狀態：[未測試 / 測試中 / ✓ 連線成功 / ✗ 連線失敗]

[測試連線] [取消] [儲存]
```

**清除專案資料確認 Modal：**
```
標題：確認清除所有專案資料

[警告圖示] 此操作將刪除所有專案、影片檔案和中間素材，且無法復原！

請輸入 "DELETE ALL" 以確認：
[____________]

[取消] [確認刪除]
```

---

#### 頁面狀態

**載入中：**
- 顯示骨架屏
- API 配額載入中顯示 spinner

**錯誤狀態：**
- API 金鑰無效：紅色提示於 API 列表項目
- YouTube 授權過期：黃色警告於帳號卡片
- 配額不足：紅色警告
- 連線測試失敗：紅色錯誤訊息

**成功狀態：**
- API 金鑰儲存成功：綠色 toast 通知「API Key 已儲存」
- 連線測試成功：綠色勾選 + 「連線成功」
- YouTube 授權成功：綠色 toast 通知「YouTube 帳號已連結」
- 設定儲存成功：綠色 toast 通知「設定已儲存」

---

#### 響應式設計

**桌面（≥1024px）：**
- 內容區寬度：900px
- 置中顯示
- API 列表為表格
- YouTube 帳號卡片 2 欄網格

**平板（768-1023px）：**
- 內容區寬度：90%
- YouTube 帳號卡片單欄顯示

**手機（<768px）：**
- 內容區寬度：100%
- API 列表改為卡片顯示
- Tab 改為下拉選單

---

#### 頁面導航

**進入此頁面：**
- 點擊導航列「設定」圖示
- 從首次啟動設定精靈點擊「稍後設定」後，可從此頁面補完設定

**離開此頁面：**
- 點擊其他導航項目
- 若有未儲存的變更，顯示確認 Modal

---

---

### Page-12: 批次處理頁 (Batch Processing)

**路由：** `/batch`

**權限要求：** 無

**關聯 User Flow：**
- Flow-5 步驟 1-5（批次處理多個影片）

---

#### 主要元件

**導航列：**
- 同 Dashboard

**麵包屑：**
- 主控台 > 批次處理

**主要內容區：**

**批次任務列表：**
- 表格顯示所有批次任務
- 欄位：
  - 任務名稱
  - 包含專案數
  - 狀態（排隊 / 執行中 / 已完成 / 失敗）
  - 成功/失敗數量
  - 創建時間
  - 操作按鈕
    - 「查看」
    - 「暫停」（僅執行中任務）
    - 「繼續」（僅已暫停任務）
    - 「刪除」

**操作按鈕（頂部）：**
- 「新增批次任務」按鈕
- 「上傳批次配置檔案」按鈕（JSON）

---

#### 新增批次任務 Modal

**表單欄位：**
- 任務名稱
- 文字檔案列表（多選上傳）
- 使用模板（下拉選單，選擇視覺配置模板）
- 使用 Prompt 範本（下拉選單）
- Gemini 模型選擇
- YouTube 設定（統一套用）
  - 隱私設定
  - 發布方式

**操作按鈕：**
- 「取消」
- 「開始批次處理」

---

#### 批次任務詳細頁

**路由：** `/batch/:id`

**顯示內容：**
- 任務名稱
- 總進度（完成數 / 總數）
- 專案列表
  - 專案名稱
  - 狀態（排隊 / 執行中 / 已完成 / 失敗）
  - 進度（0-100%）
  - YouTube 連結（若已完成）
  - 錯誤訊息（若失敗）

**操作按鈕：**
- 「暫停批次」
- 「繼續批次」
- 「重試失敗任務」
- 「下載批次報告」（CSV）
- 「返回批次列表」

---

#### 頁面狀態

**載入中：**
- 顯示骨架屏

**空狀態：**
- 無批次任務時顯示：
  - 圖示（空資料夾）
  - 文字：「還沒有任何批次任務」
  - 「新增第一個批次任務」按鈕

**錯誤狀態：**
- API 失敗時顯示錯誤訊息

---

#### 響應式設計

**桌面（≥1024px）：**
- 表格顯示

**平板（768-1023px）：**
- 表格顯示

**手機（<768px）：**
- 卡片顯示

---

#### 頁面導航

**進入此頁面：**
- 從主控台點擊「批次處理」

**離開此頁面：**
- 點擊「返回主控台」

---

---

## 共用元件 (Shared Components)

---

### Modal 對話框

**類型：**
1. **確認 Modal**
   - 標題
   - 訊息文字
   - 「確定」按鈕（主要）
   - 「取消」按鈕（次要）

2. **表單 Modal**
   - 標題
   - 表單欄位
   - 「提交」按鈕
   - 「取消」按鈕

3. **資訊 Modal**
   - 標題
   - 內容（支援 Markdown）
   - 「關閉」按鈕

**互動：**
- 點擊遮罩關閉（可配置）
- ESC 鍵關閉
- 「X」按鈕關閉

**動畫：**
- 淡入淡出

---

### Toast 通知

**類型：**
- 成功（綠色）
- 錯誤（紅色）
- 警告（黃色）
- 資訊（藍色）

**位置：**
- 右上角

**顯示時長：**
- 預設 3 秒
- 可手動關閉

**動畫：**
- 滑入滑出

---

### Loading 動畫

**類型：**
1. **Spinner**
   - 用於按鈕載入中狀態
   - 小型圓形旋轉動畫

2. **骨架屏 (Skeleton)**
   - 用於頁面載入中狀態
   - 模擬內容佈局

3. **進度條**
   - 用於檔案上傳、影片生成等長時間操作
   - 顯示百分比

---

### 按鈕 (Button)

**類型：**
- 主要按鈕（Primary）：藍色背景
- 次要按鈕（Secondary）：白色背景 + 藍色邊框
- 危險按鈕（Danger）：紅色背景
- 文字按鈕（Text）：無背景

**尺寸：**
- 小（Small）：高度 32px
- 中（Medium）：高度 40px
- 大（Large）：高度 48px

**狀態：**
- 正常
- Hover（顏色加深）
- 按下（縮放 0.95）
- 禁用（灰色，不可點擊）
- 載入中（顯示 Spinner）

---

### 表單元件

**輸入框 (Input)：**
- 文字輸入
- Email 輸入
- 密碼輸入（顯示/隱藏密碼圖示）
- 數字輸入

**文字區域 (Textarea)：**
- 多行文字輸入
- 可調整大小

**下拉選單 (Select)：**
- 單選
- 支援搜尋（選項 > 10 個時）

**勾選框 (Checkbox)：**
- 單個勾選框
- 勾選框群組

**單選按鈕 (Radio)：**
- 單選按鈕群組

**滑桿 (Slider)：**
- 數值選擇
- 顯示當前值

**顏色選擇器 (Color Picker)：**
- 顏色選擇
- 支援 hex、rgb 格式

**檔案上傳 (File Upload)：**
- 拖放上傳
- 點擊選擇檔案
- 顯示檔案名稱和大小
- 顯示上傳進度

**日期時間選擇器 (Date/Time Picker)：**
- 日期選擇
- 時間選擇
- 支援行動裝置原生 picker

---

### 導航列 (Navigation Bar)

**結構：**
- Logo（左側）
- 導航項目（中間）
  - 主控台
  - 配置管理
  - 模板管理
- 系統設定圖示（右側）
  - 點擊進入系統設定頁

**狀態：**
- 當前頁面高亮顯示
- Hover 時底部顯示藍色底線

**響應式：**
- 桌面：橫向顯示
- 平板：橫向顯示
- 手機：漢堡選單（摺疊）

---

### 麵包屑 (Breadcrumb)

**結構：**
- 主控台 > 新增專案 > 視覺化配置

**互動：**
- 點擊任一節點跳轉
- 最後一個節點不可點擊（當前頁面）

---

### 步驟指示器 (Step Indicator)

**結構：**
- 步驟 1 ✓
- 步驟 2 ✓
- 步驟 3（當前）
- 步驟 4

**狀態：**
- 已完成：綠色勾選
- 當前：藍色圓點
- 未開始：灰色圓點

**響應式：**
- 桌面：橫向顯示
- 手機：縱向顯示或僅顯示當前步驟

---

### 表格 (Table)

**功能：**
- 排序（點擊欄位標題）
- 分頁（底部分頁器）
- 篩選（下拉選單或搜尋框）

**響應式：**
- 桌面：表格顯示
- 手機：卡片顯示

---

### 卡片 (Card)

**結構：**
- 標題
- 內容
- 操作按鈕（底部或右上角）

**用途：**
- 統計資訊卡片
- 模板卡片
- 專案卡片（手機版）

---

---

## 設計系統參考

---

### 色彩定義

**主色：**
- Primary: `#1E88E5`（藍色）
- Primary Hover: `#1565C0`（深藍）

**次要色：**
- Secondary: `#F5F5F5`（淺灰）
- Secondary Hover: `#E0E0E0`（灰）

**狀態色：**
- Success: `#4CAF50`（綠色）
- Error: `#F44336`（紅色）
- Warning: `#FF9800`（橙色）
- Info: `#2196F3`（藍色）

**中性色：**
- Text Primary: `#212121`（深灰）
- Text Secondary: `#757575`（中灰）
- Border: `#E0E0E0`（淺灰）
- Background: `#FAFAFA`（極淺灰）

---

### 字體規範

**字型：**
- 中文：Noto Sans TC
- 英文：Roboto

**字體大小：**
- H1: 32px
- H2: 24px
- H3: 20px
- H4: 18px
- Body: 16px
- Small: 14px
- Tiny: 12px

**字重：**
- Regular: 400
- Medium: 500
- Bold: 700

---

### 間距系統

**間距單位：**
- xs: 4px
- sm: 8px
- md: 16px
- lg: 24px
- xl: 32px
- 2xl: 48px

**應用：**
- 元件內間距（padding）：md (16px)
- 元件間間距（margin）：lg (24px)
- 區塊間間距：xl (32px)

---

### 圓角和陰影

**圓角：**
- 小元件（按鈕）：4px
- 卡片：8px
- Modal：12px

**陰影：**
- 卡片：`0 2px 8px rgba(0,0,0,0.1)`
- Modal：`0 4px 16px rgba(0,0,0,0.2)`
- Hover：`0 4px 12px rgba(0,0,0,0.15)`

---

---

## 無障礙設計 (A11y)

---

### 鍵盤導航

- 所有互動元素可用 Tab 鍵遍歷
- Enter 鍵確認操作
- ESC 鍵關閉 Modal
- 箭頭鍵在列表中導航

---

### 螢幕閱讀器

- 所有圖片提供 alt 文字
- 表單欄位提供 label
- 按鈕提供明確文字（避免「點擊這裡」）
- 使用語義化 HTML（header, nav, main, footer）

---

### 顏色對比

- 文字與背景對比度 ≥ 4.5:1（WCAG AA）
- 重要資訊不僅靠顏色區分（使用圖示或文字）

---

### 觸控目標

- 最小觸控目標：44x44px（WCAG AAA）
- 按鈕間距 ≥ 8px

---

---

## SEO 需求

---

### Meta 標籤

**每個頁面包含：**
- `<title>`：頁面標題
- `<meta name="description">`：頁面描述
- `<meta name="keywords">`：關鍵字
- Open Graph 標籤（og:title, og:description, og:image）

---

### 語義化 HTML

- 使用 `<header>`, `<nav>`, `<main>`, `<footer>`
- 使用 `<h1>` - `<h6>` 建立標題階層
- 使用 `<article>`, `<section>` 組織內容

---

### URL 結構

- 使用清晰的 URL（例如：`/project/123/result`）
- 避免查詢參數（如需要，使用 pushState）

---

---

## 總結

---

### 統計

**總頁面數：** 12 個
1. 首次啟動設定精靈（Setup Wizard）
2. 主控台（Dashboard）
3. 新增專案頁
4. 視覺化配置頁
5. Prompt 與模型設定頁
6. YouTube 設定頁
7. 進度監控頁
8. 結果頁
9. 配置管理頁
10. 模板管理頁
11. 系統設定頁
12. 批次處理頁

**共用元件數：** 11 個
1. Modal 對話框
2. Toast 通知
3. Loading 動畫（Spinner、骨架屏、進度條）
4. 按鈕
5. 表單元件（輸入框、文字區域、下拉選單、勾選框、單選按鈕、滑桿、顏色選擇器、檔案上傳、日期時間選擇器）
6. 導航列
7. 麵包屑
8. 步驟指示器
9. 表格
10. 卡片

---

### User Flow 覆蓋情況

**所有 User Flow 都有對應的頁面支援：**

| User Flow | 對應頁面 |
|-----------|---------|
| Flow-0: 首次啟動設定流程 | Page-1 |
| Flow-1: 基本影片生成流程 | Page-3, Page-4, Page-5, Page-6, Page-7, Page-8 |
| Flow-2: 使用模板快速生成 | Page-2, Page-10, Page-3 |
| Flow-3: 視覺化界面配置 | Page-4 |
| Flow-4: 排程發布影片 | Page-6 |
| Flow-5: 批次處理多個影片 | Page-12 |
| Flow-6: 斷點續傳與錯誤恢復 | Page-2, Page-7 |
| Flow-7: 段落級配置覆寫 | Page-4 |
| Flow-8: Prompt 範本管理 | Page-5, Page-10 |
| Flow-9: 系統設定管理 | Page-11 |

**總 Flow 數：** 10 個

**覆蓋率：** 100%

---

### 需要修改的地方

**flows.md 無需修改：**
- 所有 User Flow 都已完整支援
- 頁面設計與 flows.md 完全一致

---

### 下一步建議

1. **線框圖設計（Wireframes）：**
   - 使用 Figma 繪製每個頁面的線框圖
   - 確保佈局和互動符合設計規格

2. **UI 設計（High-Fidelity Design）：**
   - 基於線框圖完成高保真設計
   - 套用設計系統（色彩、字體、間距）

3. **原型測試（Prototyping）：**
   - 製作互動原型（Figma Prototype）
   - 進行用戶測試，收集反饋

4. **技術規格：**
   - 基於 pages.md 撰寫前端技術規格
   - 定義 API 端點和資料格式

5. **開發階段：**
   - 依據 pages.md 開發前端界面
   - 實作所有互動行為和狀態管理
